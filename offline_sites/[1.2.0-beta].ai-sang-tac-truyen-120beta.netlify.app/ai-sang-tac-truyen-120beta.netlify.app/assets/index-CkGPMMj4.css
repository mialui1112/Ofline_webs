:root{--background-color: #1A1A1D;--background-color-rgb: 26, 26, 29;--panel-background-color: #2C2C34;--text-color: #F0F0F0;--text-color-secondary: #a0a0b0;--primary-color: #4facfe;--primary-color-rgb: 79, 172, 254;--secondary-color: #8A4FFF;--secondary-color-rgb: 138, 79, 255;--primary-hover-color: #69b3ff;--border-color: #404048;--error-color: #FF6B6B;--error-color-rgb: 255, 107, 107;--success-color: #50fa7b;--font-family-sans: "Inter", sans-serif;--font-family-serif: "Lora", serif;--font-family-mono: "Roboto Mono", monospace;--font-family-nunito: "Nunito", sans-serif;--font-family-work-sans: "Work Sans", sans-serif;--font-family-playfair-display: "Playfair Display", serif;--font-family-merriweather: "Merriweather", serif;--font-family-source-code-pro: "Source Code Pro", monospace;--font-family-lobster: "Lobster", cursive;--font-family-pacifico: "Pacifico", cursive;--font-body: var(--font-family-sans);--font-heading: var(--font-family-serif)}html{font-size:16px;color-scheme:dark;height:100%}body{margin:0;font-family:var(--font-body);background-color:var(--background-color);color:var(--text-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transition:background-color .3s ease,color .3s ease;overflow-x:hidden;height:100%}#root{display:flex;flex-direction:column;min-height:100dvh}*{box-sizing:border-box}button,a,[role=button],input{-webkit-tap-highlight-color:transparent}.input-group{display:flex;flex-direction:column;gap:.5rem}.input-group label{font-weight:500;color:var(--text-color-secondary);font-size:.9rem}.input-group input[type=text],.input-group textarea{width:100%;padding:.85rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);transition:border-color .3s ease,box-shadow .3s ease,background-color .3s ease,color .3s ease}.input-group input[type=text]:focus,.input-group textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.25)}.input-group input[type=text]:disabled,.input-group textarea:disabled{background-color:#333338;color:#888;cursor:not-allowed;border-color:var(--border-color)}.input-group textarea{resize:vertical;line-height:1.6}.form-layout{display:flex;flex-direction:column;gap:1.5rem}.input-warning{font-size:.85rem;color:#e0c068;margin:.25rem 0 0;line-height:1.5}.radio-group{display:flex;flex-wrap:wrap;gap:1rem;margin-top:.5rem}.radio-group label{display:flex;align-items:center;gap:.75rem;cursor:pointer;font-weight:500;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:8px;flex:1;transition:background-color .2s,border-color .2s;background-color:#25252a}.radio-group input[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--background-color);margin:0;font:inherit;color:currentColor;width:1.15em;height:1.15em;border:.15em solid currentColor;border-radius:50%;transform:translateY(-.075em);display:grid;place-content:center;transition:.1s ease-in-out;flex-shrink:0}.radio-group input[type=radio]:before{content:"";width:.65em;height:.65em;border-radius:50%;transform:scale(0);transition:.12s transform ease-in-out;box-shadow:inset 1em 1em var(--secondary-color)}.radio-group input[type=radio]:checked{border-color:var(--secondary-color)}.radio-group input[type=radio]:checked:before{transform:scale(1)}.radio-group label:has(input:checked){border-color:var(--secondary-color);background-color:rgba(var(--secondary-color-rgb),.1)}.radio-group label:has(input:disabled){cursor:not-allowed;opacity:.6}.radio-group.vertical{flex-direction:column;gap:.75rem;margin-top:.25rem}.radio-group.vertical label{flex:initial}.radio-group.vertical label span{color:var(--text-color);font-size:.95rem}.input-group .file-input-wrapper{position:relative;display:flex;align-items:center;border-radius:8px}.file-input-label{flex-grow:1;padding:.85rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:border-color .3s ease,box-shadow .3s ease;min-width:0}.file-input-label:hover{border-color:var(--secondary-color)}.file-input-label.placeholder{color:var(--text-color-secondary)}.input-group input[type=file]{display:none}@keyframes glow-background-position{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.glow-border{position:relative;z-index:0}.glow-border:before{content:"";position:absolute;z-index:-1;top:0;right:0;bottom:0;left:0;border-radius:inherit;padding:2px;background:radial-gradient(circle at 50% 50%,var(--secondary-color),var(--primary-color),var(--secondary-color));background-size:300% 300%;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none;animation:glow-background-position 8s linear infinite;will-change:background-position}.splash-cursor-container{position:fixed;top:0;left:0;z-index:1;pointer-events:none;width:100vw;height:100vh}#fluid{width:100%;height:100%;display:block}@keyframes futuristic-glow{0%,to{text-shadow:0 0 10px rgba(var(--secondary-color-rgb),.7),0 0 20px rgba(var(--primary-color-rgb),.5)}50%{text-shadow:0 0 20px rgba(var(--secondary-color-rgb),.9),0 0 35px rgba(var(--primary-color-rgb),.7)}}@keyframes futuristic-glow-mobile{0%,to{text-shadow:0 0 10px rgba(184,134,11,.7),0 0 20px rgba(255,215,0,.5)}50%{text-shadow:0 0 20px rgba(184,134,11,.9),0 0 35px rgba(255,215,0,.7)}}@keyframes fadeInContent{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.main-menu-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100dvh;padding:2rem;position:relative;overflow:hidden;background-color:#1a1a1d}.app-version{position:absolute;bottom:1rem;right:1.5rem;font-size:.8rem;color:var(--text-color-secondary);opacity:.5;font-family:var(--font-family-mono);z-index:3}.video-crossfade-container,.video-background-pc{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.main-menu-video-bg{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);opacity:0;pointer-events:none}.video-crossfade-container .main-menu-video-bg{filter:brightness(.8);transition:opacity 1.5s ease-in-out}.video-background-pc .main-menu-video-bg{filter:brightness(.9);transition:opacity 1s ease-in-out}.main-menu-video-bg.active{opacity:1}.video-overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.main-menu-content{max-width:700px;position:relative;z-index:2;animation:fadeInContent 1.5s ease-in-out;text-align:center}.main-menu-title{font-size:4rem;font-weight:700;font-family:var(--font-family-work-sans);color:#fff;margin:0 0 1.5rem;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:futuristic-glow 4s ease-in-out infinite}.main-menu-subtitle{font-size:1.4rem;margin-bottom:4rem;line-height:1.7;font-family:var(--font-family-nunito);background:linear-gradient(45deg,#c1a4ff,#a1c4fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 10px rgba(0,0,0,.8)}.main-menu-actions{display:flex;gap:1.5rem;justify-content:center;flex-wrap:wrap}.main-menu-button{padding:1rem 2.5rem;font-size:1.1rem;font-weight:600;border-radius:8px;cursor:pointer;transition:all .3s ease;min-width:220px;background-color:#0f192880;box-shadow:0 0 15px rgba(var(--secondary-color-rgb),.15),inset 0 0 10px rgba(var(--primary-color-rgb),.1);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;background-image:linear-gradient(45deg,#c1a4ff,#a1c4fd)}.main-menu-button:hover:not(:disabled){transform:translateY(-4px) scale(1.03);background:#142337b3;box-shadow:0 0 25px rgba(var(--secondary-color-rgb),.5),inset 0 0 15px rgba(var(--primary-color-rgb),.2);-webkit-background-clip:initial;background-clip:initial;-webkit-text-fill-color:white;color:#fff}.main-menu-button:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 600px){.main-menu-title{font-size:3rem;background:linear-gradient(45deg,#b8860b,gold);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:futuristic-glow-mobile 4s ease-in-out infinite}.main-menu-subtitle{font-size:1.2rem;background:linear-gradient(45deg,khaki,gold);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.main-menu-actions{flex-direction:column;gap:1rem;align-items:center}.main-menu-button{width:100%;max-width:300px;box-shadow:0 0 15px #b8860b40,inset 0 0 10px #ffd70033;background-image:linear-gradient(45deg,khaki,gold)}.main-menu-button:hover:not(:disabled){box-shadow:0 0 25px #b8860b80,inset 0 0 15px #ffd7004d;-webkit-background-clip:initial;background-clip:initial;-webkit-text-fill-color:white;color:#fff;background-image:none;background-color:#281e0fb3}.main-menu-button.glow-border:before{background:radial-gradient(circle at 50% 50%,#b8860b,gold,#b8860b)}}.app-header{text-align:center;padding:1rem 0;margin-bottom:.5rem}.app-header h1{font-size:2.25rem;font-weight:700;margin:0 0 .5rem;position:relative;display:inline-block;font-family:var(--font-heading);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 20px rgba(var(--primary-color-rgb),.6)}.app-header h1:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:50px;height:4px;background:linear-gradient(90deg,var(--secondary-color),var(--primary-color));border-radius:2px}.app-header p{font-size:1rem;color:var(--text-color-secondary);max-width:60ch;margin:0 auto;text-shadow:0 1px 3px rgba(0,0,0,.5)}@media (max-width: 600px){.app-header h1{font-size:2rem}.app-header p{font-size:.9rem}}.tab-switcher{display:flex;border-bottom:1px solid rgba(var(--secondary-color-rgb),.3);margin-bottom:1rem}.tab-button{flex:1;padding:1rem;cursor:pointer;background-color:transparent;border:none;color:var(--text-color-secondary);font-size:1rem;font-weight:600;font-family:var(--font-sans);transition:color .3s,border-bottom-color .3s;border-bottom:3px solid transparent;margin-bottom:-1px}.tab-button:hover:not(:disabled){background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.tab-button.active{background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;border-bottom-style:solid;border-image-slice:1;border-image-source:linear-gradient(to right,var(--secondary-color),var(--primary-color))}.tab-button:disabled{color:#666;cursor:not-allowed}#setting,#mainCharacter,#openingSuggestion,#plotOutline{min-height:80px}#mainCharacterGoal{min-height:50px}.label-with-actions{display:flex;justify-content:space-between;align-items:center;width:100%;gap:1rem}.label-with-actions label{font-weight:500;color:var(--text-color-secondary);font-size:.9rem}.input-group.missing-required #genre{border-color:var(--error-color);animation:pulse-red-border .5s ease-out}.input-group.missing-required #genre:focus{border-color:var(--error-color);box-shadow:0 0 0 3px #ff6b6b59}.input-group.missing-required label[for=genre]{color:var(--error-color);font-weight:600}@keyframes pulse-red-border{0%{box-shadow:0 0 #ff6b6b59}70%{box-shadow:0 0 0 5px #ff6b6b00}to{box-shadow:0 0 #ff6b6b00}}@media (max-width: 768px){.vertical-on-mobile{flex-direction:column;gap:.75rem}}#fanficIdea,#mainCharacter,#plotOutline{min-height:80px}.name-and-link-inputs,.file-and-mc-inputs{display:flex;flex-direction:column;gap:1.5rem}.fanfic-world-updater{display:flex;flex-direction:column;gap:2rem}#fanfic-update-prompt{min-height:100px}.world-display-section{display:flex;flex-direction:column;gap:1rem}.fanfic-rag-ready{display:flex;flex-direction:column;gap:1.5rem;padding:1.5rem;border:1px solid var(--success-color);border-radius:8px;background-color:#50fa7b0d}.fanfic-rag-ready .input-group label{color:var(--success-color);font-weight:600}.fanfic-rag-ready #rag-opening-suggestion{min-height:80px}.fanfic-rag-ready .input-group.action-mode-group label{color:var(--text-color-secondary)}.fanfic-rag-ready .conditional-prompt-area{margin-top:-.5rem;animation:fadeIn .3s ease-in-out forwards}.spinner{border:3px solid rgba(255,255,255,.2);border-radius:50%;border-top-color:var(--primary-color);width:16px;height:16px;animation:spin 1s linear infinite}.generate-button .spinner{border-top-color:#fff}.writing-indicator{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:1rem;color:var(--text-color-secondary);font-style:italic;margin:auto}.writing-indicator .spinner{width:32px;height:32px;border-width:4px}.button-group{display:flex;flex-direction:column;gap:.75rem;margin-top:1rem;width:100%}.generate-button{display:flex;justify-content:center;align-items:center;gap:.75rem;padding:.85rem 1.5rem;border:1px solid var(--primary-color);border-radius:8px;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out;width:100%;box-shadow:0 4px 15px rgba(var(--primary-color-rgb),.3),0 0 10px rgba(var(--secondary-color-rgb),.2) inset;text-shadow:0 1px 2px rgba(0,0,0,.2)}.generate-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(var(--primary-color-rgb),.4),0 0 15px rgba(var(--secondary-color-rgb),.3) inset}.generate-button:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}.secondary-buttons-wrapper{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:.75rem}.secondary-button{padding:.75rem 1rem;border:1px solid var(--border-color);background-color:transparent;color:var(--text-color-secondary);border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:500;transition:background-color .2s,border-color .2s,color .2s;text-align:center}.secondary-button:hover:not(:disabled){background-image:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;background-color:rgba(var(--secondary-color-rgb),.1);border-color:var(--secondary-color)}.save-button:hover:not(:disabled),.translate-all-button:hover:not(:disabled){border-color:var(--success-color);color:var(--success-color);background-color:#50fa7b1a;-webkit-background-clip:initial;background-clip:initial;-webkit-text-fill-color:initial}.secondary-button:disabled{opacity:.6;cursor:not-allowed;background-color:transparent;border-color:var(--border-color);color:#888}.delete-chapter-button:hover:not(:disabled){border-color:var(--error-color);color:var(--error-color);background-color:#ff6b6b1a;-webkit-background-clip:initial;background-clip:initial;-webkit-text-fill-color:initial}.world-building-form{display:flex;flex-direction:column;gap:2rem}#world-building-prompt{min-height:100px}.world-display-section{display:flex;flex-direction:column;gap:1rem;transition:all .4s cubic-bezier(.25,1,.5,1)}.world-display-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:.75rem;gap:1rem;flex-wrap:wrap}.world-display-header h3{margin:0;font-size:1.25rem;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.world-header-actions{display:flex;gap:.75rem;flex-shrink:0;align-items:center}.use-world-button{padding:.5rem 1rem;border:1px solid var(--success-color);background-color:#50fa7b1a;color:var(--success-color);border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .2s}.use-world-button:hover:not(:disabled){background-color:#50fa7b33;color:#fff;box-shadow:0 0 8px #50fa7b4d}.use-world-button:disabled{opacity:.6;cursor:not-allowed;background-color:transparent;border-color:var(--border-color);color:#888;box-shadow:none}.export-world-button{padding:.5rem 1rem;border:1px solid var(--border-color);background-color:transparent;color:var(--text-color-secondary);border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:500;transition:background-color .2s,border-color .2s,color .2s}.export-world-button:hover:not(:disabled){background-color:var(--border-color);border-color:var(--primary-color);color:var(--text-color)}.export-world-button:disabled{opacity:.6;cursor:not-allowed}.world-description-display{background-color:#00000026;border-radius:8px;padding:1.5rem;min-height:200px;line-height:1.7;font-size:1.05rem;color:var(--text-color);border:1px solid var(--border-color);resize:vertical;font-family:var(--font-body);transition:border-color .2s,box-shadow .2s}.world-description-display:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.25)}.world-description-placeholder{background-color:#00000026;border:2px dashed var(--border-color);border-radius:8px;padding:2rem;min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:var(--text-color-secondary);font-style:italic}.world-description-placeholder p{margin:0;font-size:1.1rem}.world-description-placeholder .placeholder-subtext{margin-top:.5rem;font-size:.9rem;max-width:60ch}.expand-world-button{padding:.5rem;border:1px solid var(--border-color);background-color:transparent;color:var(--text-color-secondary);border-radius:50%;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .2s;display:flex;align-items:center;justify-content:center;width:36px;height:36px}.expand-world-button:hover:not(:disabled){background-color:var(--border-color);border-color:var(--primary-color);color:var(--primary-color);transform:scale(1.1)}.world-description-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000000b3;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:99;animation:fadeInOverlay .3s ease-in-out}.world-building-form.is-expanded .world-display-section{position:fixed;top:2rem;left:2rem;right:2rem;bottom:2rem;z-index:100;background:var(--background-color);border-radius:12px;border:1px solid var(--primary-color);box-shadow:0 10px 40px #00000080;padding:1.5rem}.world-building-form.is-expanded .world-description-display{flex-grow:1;height:auto}.script-generation-section{margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-color);display:flex;flex-direction:column;gap:1.5rem}.script-generation-section h3{margin:0;font-size:1.25rem;color:var(--text-color)}.generate-script-button{display:flex;justify-content:center;align-items:center;gap:.75rem;padding:.8rem 1.5rem;border-radius:8px;background:linear-gradient(45deg,#f1fa8c,#ffb86c);color:#1a1a1d;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;width:100%;border:none}.generate-script-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #ffb86c33}.generate-script-button:disabled{opacity:.5;cursor:not-allowed}.use-world-button.script-version{border-color:#ffb86c;background-color:#ffb86c1a;color:#ffb86c}.use-world-button.script-version:hover:not(:disabled){background-color:#ffb86c33;color:#fff;box-shadow:0 0 8px #ffb86c4d}@media (max-width: 600px){.world-display-header{flex-direction:column;align-items:stretch;gap:1rem}.world-header-actions{flex-shrink:1;flex-wrap:wrap;justify-content:center}.world-header-actions .use-world-button{flex-basis:100%;order:2}.world-header-actions .context-action-button,.world-header-actions .expand-world-button,.world-header-actions .export-world-button{order:1}}.translation-form-container{display:flex;flex-direction:column;gap:1.5rem}.char-count-input-group{max-width:250px;animation:fadeIn .3s ease-in-out forwards}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#char-count-input{padding:.85rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);width:100%}#char-count-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.25)}.adult-toggle-container{background-color:#ff6b6b0d;border:1px solid rgba(255,107,107,.2);border-radius:8px;padding:1rem}.adult-toggle-label{display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-weight:600;color:var(--text-color)}.adult-toggle-label[for]{cursor:pointer}.adult-toggle-label[for][aria-disabled=true]{cursor:not-allowed;opacity:.6}input:checked+.slider{background-color:var(--error-color)}input:focus+.slider{box-shadow:0 0 1px var(--error-color)}.toggle-description{font-size:.85rem;color:var(--text-color-secondary);margin:.75rem 0 0;line-height:1.5}.nsfw-genre-input-container{padding:1rem;border:1px dashed var(--border-color);border-radius:8px;background-color:#0000001a}#nsfwGenre{width:100%}.prompt-description{font-size:.85rem;color:var(--text-color-secondary);margin:.75rem 0 0;line-height:1.5}.custom-nsfw-prompt-container{padding:1rem;border:1px dashed var(--border-color);border-radius:8px;background-color:#0000001a;display:flex;flex-direction:column;gap:1.5rem}#customNsfwPrompt{min-height:120px}.prompt-description{font-size:.85rem;color:var(--text-color-secondary);margin:0;line-height:1.5}.fanfic-creativity-slider-container{padding:1.25rem;border:1px solid var(--border-color);background-color:#24242880;border-radius:8px;display:flex;flex-direction:column;gap:.75rem}.slider-header{display:flex;justify-content:space-between;align-items:baseline;gap:1rem;flex-wrap:wrap}.slider-header label{font-size:.9rem;font-weight:500;color:var(--text-color-secondary)}.slider-value-label{font-size:1rem;font-weight:600;color:var(--primary-color);white-space:nowrap}.creativity-slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:8px;background:linear-gradient(90deg,var(--secondary-color) 0%,var(--primary-color) 100%);border-radius:5px;outline:none;transition:opacity .2s}.creativity-slider:disabled{opacity:.5}.creativity-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:20px;height:20px;background:#fff;cursor:pointer;border-radius:50%;border:3px solid #333;box-shadow:0 0 5px #00000080}.creativity-slider::-moz-range-thumb{width:20px;height:20px;background:#fff;cursor:pointer;border-radius:50%;border:3px solid #333;box-shadow:0 0 5px #00000080}.slider-description{font-size:.85rem;color:var(--text-color-secondary);margin:0;text-align:center;line-height:1.5}.structured-outline-container{display:flex;flex-direction:column;gap:1.5rem;padding:1rem;border:1px solid var(--border-color);border-radius:8px;background-color:#00000026}.outline-arc{border:1px solid var(--border-color);border-radius:8px;background-color:#24242880;transition:all .3s ease}.outline-arc-header{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem}.collapse-btn{background:transparent;border:1px solid transparent;color:var(--text-color-secondary);cursor:pointer;padding:.25rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.collapse-btn:hover{background-color:var(--border-color);color:var(--text-color)}.collapse-btn .chevron-icon{transition:transform .3s ease}.collapse-btn .chevron-icon.is-open{transform:rotate(180deg)}.arc-title-input{flex-grow:1;background:transparent;border:none;color:var(--text-color);font-size:1.1rem;font-weight:600;padding:.25rem .5rem;border-radius:4px;transition:background-color .2s;min-width:0}.arc-title-input:focus{outline:none;background-color:#ffffff0d}.action-btn{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);cursor:pointer;font-size:.85rem;font-weight:500;padding:.4rem .8rem;border-radius:6px;transition:all .2s;display:flex;align-items:center;gap:.5rem;flex-shrink:0}.action-btn:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.action-btn.delete-btn:hover:not(:disabled){background-color:#ff6b6b1a;border-color:var(--error-color);color:var(--error-color)}.action-btn.add-chapter-btn:hover:not(:disabled){background-color:#50fa7b1a;border-color:var(--success-color);color:var(--success-color)}.action-btn:disabled{opacity:.5;cursor:not-allowed}.outline-arc-body{padding:0 1rem 1rem;display:flex;flex-direction:column;gap:1rem}.outline-chapter{background-color:#25252a;border:1px solid var(--border-color);border-radius:6px;padding:1rem;display:flex;flex-direction:column;gap:.75rem}.outline-chapter-header{display:flex;align-items:flex-start;gap:.75rem}.chapter-number{font-size:.9rem;font-weight:600;color:var(--text-color-secondary);padding-top:.6rem;white-space:nowrap}.chapter-title-textarea{flex-grow:1;background:transparent;border:none;resize:none;color:var(--text-color);font-size:1rem;font-weight:500;line-height:1.6;padding:.5rem;border-radius:4px;transition:background-color .2s;min-width:0}.chapter-title-textarea:focus{outline:none;background-color:#ffffff0d}.outline-scenes{padding-left:2rem;display:flex;flex-direction:column;gap:.75rem}.outline-scene{display:flex;align-items:flex-start;gap:.5rem;padding-left:1rem;border-left:2px solid var(--border-color)}.outline-scene .delete-btn{padding:.5rem}.outline-scene .delete-btn svg{width:14px;height:14px}.scene-content-textarea{flex-grow:1;background:#333338;border:1px solid var(--border-color);color:var(--text-color);padding:.6rem;border-radius:4px;font-size:.95rem;line-height:1.6;resize:none;min-width:0}.scene-content-textarea:focus{outline:none;border-color:var(--primary-color)}.add-scene-btn{align-self:flex-start;font-size:.8rem;padding:.3rem .6rem}.add-scene-btn:hover:not(:disabled){background-color:#4facfe1a;border-color:var(--primary-color);color:var(--primary-color)}.add-arc-btn{align-self:center;width:100%;justify-content:center;padding:.75rem;font-size:1rem;font-weight:600}.add-arc-btn:hover:not(:disabled){background-color:#8a4fff1a;border-color:var(--secondary-color);color:var(--secondary-color)}@media (max-width: 768px){.structured-outline-container{padding:.75rem}.outline-arc-header{flex-wrap:wrap}.outline-chapter-header{flex-wrap:wrap;gap:.5rem}.chapter-number{padding-top:.25rem;flex-basis:100%}.outline-scenes{padding-left:1rem}.outline-scene{align-items:center}.action-btn{padding:.5rem .6rem}}.advanced-options-container{padding-top:1.5rem;margin-top:1.5rem;border-top:1px solid rgba(var(--secondary-color-rgb),.3);display:flex;flex-direction:column;gap:1.5rem}.advanced-options-title{margin:0 0 -.5rem;font-size:1.1rem;font-weight:600;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}#writingStyle{min-height:80px}.style-option-toggle{display:flex;align-items:center;gap:.75rem;margin-top:.75rem}.style-option-toggle input[type=checkbox]{width:1.15em;height:1.15em;flex-shrink:0}.style-option-toggle label{font-size:.9rem;color:var(--text-color);cursor:pointer}.controls-section-content{display:none;padding:1rem 0 0;flex-direction:column;gap:1rem}.controls-section-content.is-open{display:flex;animation:fadeInAdvancedOptionsContent .5s ease forwards}@keyframes fadeInAdvancedOptionsContent{0%{opacity:0}to{opacity:1}}@keyframes slideInModal{0%{opacity:0;transform:translateY(15px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.wb-guide-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2500;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.wb-guide-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:650px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInModal .3s ease-out}.wb-guide-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid rgba(138,79,255,.2);flex-shrink:0}.wb-guide-modal-header h3{margin:0;font-family:var(--font-family-playfair-display);font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(79,172,254,.5)}.close-wb-guide-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-wb-guide-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.wb-guide-modal-body{padding:1.5rem 2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.25rem;line-height:1.7;color:var(--text-color-secondary);scrollbar-width:none;-ms-overflow-style:none}.wb-guide-modal-body h4{margin:0;font-size:1.2rem;font-weight:600;color:var(--text-color);padding-bottom:.5rem;border-bottom:1px solid var(--border-color)}.wb-guide-modal-body ol{padding-left:1.5rem;margin:0}.wb-guide-modal-body ul{padding-left:1.5rem;margin:.5rem 0 0;list-style-type:"– "}.wb-guide-modal-body li{margin-bottom:.5rem}.wb-guide-modal-body em{font-style:italic;color:var(--primary-color);background-color:#4facfe1a;padding:.1em .4em;border-radius:4px}.wb-guide-modal-body strong{color:var(--success-color);font-weight:600}.wb-guide-modal-footer{padding:1rem 2rem 1.5rem;border-top:1px solid rgba(138,79,255,.2);display:flex;justify-content:flex-end}.wb-guide-ok-button{padding:.75rem 1.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #4facfe33;transition:transform .2s ease,box-shadow .2s ease}.wb-guide-ok-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #4facfe4d}.wb-guide-modal-body::-webkit-scrollbar{display:none}.rule-guide-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2500;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.rule-guide-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards}.rule-guide-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid rgba(138,79,255,.2);flex-shrink:0}.rule-guide-modal-header h3{margin:0;font-family:var(--font-family-playfair-display);font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(79,172,254,.5)}.close-rule-guide-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-rule-guide-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.rule-guide-modal-body{padding:1.5rem 2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.25rem;line-height:1.7;color:var(--text-color-secondary);scrollbar-width:none;-ms-overflow-style:none}.rule-guide-modal-body::-webkit-scrollbar{display:none}.rule-guide-modal-body>p{font-size:1rem;color:var(--text-color);text-align:center;background-color:#0003;padding:1rem;border-radius:8px;margin:-.5rem 0 .5rem}.rule-explanation-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:1.25rem}.rule-explanation-list li{padding-bottom:1.25rem;border-bottom:1px solid var(--border-color)}.rule-explanation-list li:last-child{border-bottom:none;padding-bottom:0}.rule-explanation-list li strong{font-size:1.05rem;font-weight:600;color:var(--primary-color);display:block;margin-bottom:.5rem}.rule-explanation-list li p{margin:0;padding-left:.5rem}.rule-guide-modal-footer{padding:1rem 2rem 1.5rem;border-top:1px solid rgba(138,79,255,.2);display:flex;justify-content:flex-end}.rule-guide-ok-button{padding:.75rem 1.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #4facfe33;transition:transform .2s ease,box-shadow .2s ease}.rule-guide-ok-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #4facfe4d}.rule-manager-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.rule-manager-title{font-size:.9rem;font-weight:600;color:var(--text-color-secondary);margin:0;text-transform:uppercase;letter-spacing:.5px}.rule-manager-actions{display:flex;gap:.5rem}.rule-manager-actions button{padding:.25rem .75rem;font-size:.85rem;font-weight:500;border-radius:4px;cursor:pointer;background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);transition:all .2s}.rule-manager-actions button:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.rule-manager-actions button:disabled{opacity:.5;cursor:not-allowed}.rule-disclaimer{display:flex;gap:.75rem;align-items:center;padding:.75rem 1rem;margin-bottom:1rem;border-radius:6px;background-color:rgba(var(--error-color-rgb),.1);border:1px solid var(--error-color);color:#fcc;font-size:.9rem;font-weight:500;line-height:1.5}.rule-disclaimer svg{flex-shrink:0;width:20px;height:20px;color:var(--error-color)}.rule-sections{display:flex;flex-direction:column;gap:1.5rem}.rule-section-title-wrapper{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);margin-bottom:.75rem}.rule-section-title{font-size:.95rem;font-weight:600;color:var(--text-color);margin:0;padding:0;border:none}.rule-guide-button{background:transparent;border:1px solid transparent;color:var(--text-color-secondary);cursor:pointer;padding:.25rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.rule-guide-button:hover{background-color:rgba(var(--secondary-color-rgb),.1);border-color:var(--secondary-color);color:var(--secondary-color)}.rule-input-group{display:flex;gap:.5rem;margin-top:.5rem}.rule-input-group input{flex-grow:1;padding:.65rem .85rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.95rem;min-width:0}.rule-input-group input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.rule-input-group button{padding:0 1rem;background-color:var(--primary-color);color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s;flex-shrink:0}.rule-input-group button:hover:not(:disabled){background-color:var(--primary-hover-color)}.rule-input-group button:disabled{background-color:#555;cursor:not-allowed;opacity:.7}.rule-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.75rem;max-height:250px;overflow-y:auto;padding-right:.5rem;scrollbar-width:none;-ms-overflow-style:none}.rule-list::-webkit-scrollbar{display:none}.rule-item{display:flex;justify-content:space-between;align-items:center;gap:1rem;background-color:#2c2c34;padding:.75rem;border-radius:6px;animation:fadeInRule .3s ease}.rule-item-main{display:flex;align-items:center;gap:1rem;flex-grow:1;min-width:0}.rule-text{flex-grow:1;font-size:.9rem;line-height:1.5;color:var(--text-color);cursor:pointer}.remove-user-rule-btn{background:transparent;border:none;color:var(--text-color-secondary);cursor:pointer;font-size:1.5rem;line-height:1;padding:0 .5rem;transition:color .2s;flex-shrink:0}.remove-user-rule-btn:hover:not(:disabled){color:var(--error-color)}.toggle-switch-rule{position:relative;display:inline-block;width:44px;height:24px;flex-shrink:0}.toggle-switch-rule input{opacity:0;width:0;height:0}.slider-rule{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#444;transition:.4s;border-radius:24px}.slider-rule:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}.toggle-switch-rule input:checked+.slider-rule{background-color:var(--success-color)}.toggle-switch-rule input:focus+.slider-rule{box-shadow:0 0 1px var(--success-color)}.toggle-switch-rule input:checked+.slider-rule:before{transform:translate(20px)}.toggle-switch-rule input:disabled+.slider-rule{opacity:.5;cursor:not-allowed}.setup-view-reimagined{display:flex;align-items:center;justify-content:center;flex-grow:1;padding:2rem;position:relative}.setup-panel-reimagined{width:100%;max-width:1200px;height:calc(100dvh - 4rem);max-height:950px;background:rgba(var(--background-color-rgb, 26, 26, 29),.95);border-radius:12px;box-shadow:0 10px 40px #00000080,0 0 25px rgba(var(--primary-color-rgb),.1);z-index:2;display:flex;flex-direction:column}.top-bar-reimagined{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;flex-shrink:0}.exit-button-reimagined{background:transparent;border:1px solid transparent;color:var(--text-color-secondary);padding:.5rem 1rem;border-radius:6px;cursor:pointer;transition:all .2s ease;font-weight:500}.setup-scroll-content{flex-grow:1;overflow-y:auto;padding:0 2.5rem;scrollbar-width:none;-ms-overflow-style:none}.setup-columns{display:grid;grid-template-columns:minmax(0,2fr) minmax(340px,1fr);gap:2.5rem}.setup-column-main{display:flex;flex-direction:column;gap:1.5rem;min-width:0}.setup-column-sidebar{display:flex;flex-direction:column;gap:1.5rem;position:sticky;top:0;min-width:0}.setup-footer-actions{padding:1.5rem 2.5rem;border-top:1px solid rgba(var(--secondary-color-rgb),.3);background:rgba(var(--background-color-rgb, 26, 26, 29),.5);flex-shrink:0}.setup-scroll-content::-webkit-scrollbar{display:none}.controls-section-content{display:none;padding:0 1rem 1rem;flex-direction:column;gap:1rem}.controls-section-content.is-open{display:flex;animation:fadeInSetupContent .5s ease}@keyframes fadeInSetupContent{0%{opacity:0}to{opacity:1}}.context-actions{display:flex;gap:.75rem;flex-shrink:0}.context-action-button{padding:.4rem .9rem;font-size:.85rem;font-weight:600;border:1px solid var(--secondary-color);border-radius:6px;cursor:pointer;background-color:rgba(var(--secondary-color-rgb),.1);background-image:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;transition:all .2s;white-space:nowrap}.context-action-button:hover:not(:disabled){color:#fff;border-color:var(--primary-hover-color);background-color:rgba(var(--secondary-color-rgb),.2);background-image:none;-webkit-background-clip:initial;-webkit-text-fill-color:initial;background-clip:initial;text-fill-color:initial}.context-action-button:disabled{opacity:.6;cursor:not-allowed}@media (min-width: 1024px){.setup-panel-reimagined{background:rgba(var(--background-color-rgb, 26, 26, 29),.85);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}}@media (max-width: 1024px){.setup-columns{grid-template-columns:1fr}.setup-column-sidebar{position:static}}@media (max-width: 768px){.setup-view-reimagined{padding:1rem;align-items:stretch}.setup-panel-reimagined{height:auto;max-height:none}.setup-scroll-content{padding:0 1.5rem}.setup-footer-actions{padding:1rem 1.5rem}}@media (max-width: 600px){.top-bar-reimagined{flex-direction:column;align-items:stretch;gap:1rem;padding:1rem 1.5rem}.exit-button-reimagined{text-align:center;order:1}.context-actions{order:2;flex-direction:column}}.chapter{padding-bottom:2.5rem;border-bottom:1px solid rgba(var(--secondary-color-rgb),.25)}.chapter:last-child{border-bottom:none;padding-bottom:0}.chapter-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;gap:1rem;flex-wrap:wrap}.chapter-title-wrapper{display:flex;align-items:baseline;gap:.75rem;flex-grow:1;min-width:0}.chapter-title{font-size:2rem;margin:0;font-family:var(--font-heading);font-weight:700;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.token-usage{font-size:.85rem;font-family:var(--font-body);color:var(--text-color-secondary);background-color:rgba(var(--secondary-color-rgb),.1);padding:.25rem .6rem;border-radius:6px;border:1px solid rgba(var(--secondary-color-rgb),.2);font-weight:500;white-space:nowrap;flex-shrink:0}.chapter-actions{display:flex;gap:.75rem;flex-shrink:0}.action-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 8px #0003}.regenerate-button{border-color:#69b3ff;color:#69b3ff}.regenerate-button:hover:not(:disabled){background-color:#69b3ff1a;color:#fff}.edit-button:hover:not(:disabled){border-color:var(--secondary-color);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.editing-textarea{width:100%;padding:1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1.1rem;font-family:var(--font-body);line-height:1.8;resize:vertical;transition:border-color .2s,box-shadow .2s}.editing-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.25)}.chapter-content{line-height:1.8;white-space:pre-wrap;font-family:var(--font-body);font-size:1.1rem;color:var(--text-color)}.character-mention,.location-mention,.lore-mention{font-weight:600;transition:all .2s ease-in-out;padding:.1em 0;border-bottom:2px solid transparent;text-shadow:0 0 8px rgba(0,0,0,.5);border-radius:3px;cursor:pointer}.character-mention:hover,.location-mention:hover,.lore-mention:hover{transform:translateY(-1px)}.character-mention.gender-male{color:#69b3ff}.character-mention.gender-male:hover{border-bottom-color:#69b3ff;background-color:#69b3ff1a}.character-mention.gender-female{color:#ff79c6}.character-mention.gender-female:hover{border-bottom-color:#ff79c6;background-color:#ff79c61a}.location-mention{color:#50fa7b}.location-mention:hover{border-bottom-color:#50fa7b;background-color:#50fa7b1a}.lore-mention{color:#f1fa8c}.lore-mention:hover{border-bottom-color:#f1fa8c;background-color:#f1fa8c1a}.pagination-controls{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;-webkit-user-select:none;user-select:none;border-style:solid;border-color:rgba(var(--secondary-color-rgb),.25);border-width:1px 0;margin:-1.5rem 0}.story-container>.pagination-controls:first-of-type{border-top-width:0;margin-top:-3rem;margin-bottom:1.5rem}.story-container>.pagination-controls:last-of-type{border-bottom-width:0;margin-top:1.5rem;margin-bottom:-3rem}.story-container>.pagination-controls:first-of-type:last-of-type{border-width:0;padding:0;margin:-1.5rem 0}.pagination-info{font-weight:600;color:var(--text-color-secondary);font-family:var(--font-sans)}.pagination-button{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);padding:.5rem 1.2rem;border-radius:50px;cursor:pointer;transition:all .2s ease;font-weight:600}.pagination-button:hover:not(:disabled){background-image:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;background-color:rgba(var(--secondary-color-rgb),.1);border-color:var(--secondary-color)}.pagination-button:disabled{opacity:.4;cursor:not-allowed}.story-container{background-color:var(--color-reading-background);padding:3rem 4rem;border-radius:8px;min-height:600px;display:flex;flex-direction:column;gap:2.5rem;max-width:var(--reading-width);margin:0 auto;box-shadow:inset 0 0 25px #0006,0 5px 30px #00000080;position:relative}.placeholder-text{color:var(--text-color-secondary);text-align:center;font-style:italic;margin:auto;font-size:1.2rem;font-family:var(--font-heading);line-height:1.8}@media (max-width: 768px){.story-container{padding:2rem 1.5rem;min-height:400px}}.translation-chapter-container{background-color:var(--panel-background-color);border-radius:12px;padding:2rem;display:flex;flex-direction:column;gap:1.5rem}.translation-chapter-header h3{margin:0;font-size:2rem;font-family:var(--font-heading);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.translation-chapter-body{display:grid;grid-template-columns:1fr 1fr;gap:2rem;min-height:400px}.translation-panel{display:flex;flex-direction:column;gap:1rem;min-height:0;min-width:0}.translation-panel-header,.translated-panel-header{display:flex;justify-content:space-between;align-items:baseline;border-bottom:1px solid var(--border-color);padding-bottom:.75rem}.translation-panel h4{margin:0;font-size:1rem;font-weight:600;color:var(--text-color-secondary);border-bottom:none;padding-bottom:0}.char-counter{font-size:.85rem;font-family:var(--font-body);color:var(--text-color-secondary);background-color:rgba(var(--secondary-color-rgb),.1);padding:.25rem .6rem;border-radius:6px;border:1px solid rgba(var(--secondary-color-rgb),.2);font-weight:500;white-space:nowrap;flex-shrink:0}.translated-panel-header{align-items:center}.text-content-area{flex-grow:1;background-color:#0003;border:1px solid var(--border-color);border-radius:8px;padding:1rem;line-height:1.7;white-space:pre-wrap;overflow-y:auto;font-size:1.05rem;overflow-wrap:break-word}.text-content-area:focus{outline:none;border-color:var(--primary-color)}.source-text-content{color:var(--text-color-secondary)}.translated-text-wrapper{display:flex;flex-direction:column}.translation-placeholder{display:flex;align-items:center;justify-content:center;height:100%;text-align:center}.translate-button{padding:1rem 1.5rem;border:1px solid var(--success-color);border-radius:8px;background:linear-gradient(45deg,#50fa7b,#3ddc84);color:#1a1a1d;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s ease-in-out}.translate-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #50fa7b33}.translate-button:disabled{opacity:.5;cursor:not-allowed}.editing-textarea-translation{width:100%;height:100%;flex-grow:1;padding:1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1.05rem;font-family:var(--font-body);line-height:1.7;resize:none}.editing-textarea-translation:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4facfe40}.chapter-actions{display:flex;gap:.75rem}.action-button{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);cursor:pointer;font-size:.9rem;font-weight:500;padding:.5rem 1rem;border-radius:6px;transition:all .2s}.action-button:hover:not(:disabled){transform:translateY(-2px)}.refine-button{border-color:#f1fa8c;color:#f1fa8c}.refine-button:hover:not(:disabled){background-color:#f1fa8c1a;color:#fff}.edit-button:hover:not(:disabled){border-color:var(--secondary-color);color:var(--secondary-color);background-color:#8a4fff1a}.save-button{border-color:var(--success-color);color:var(--success-color)}.save-button:hover:not(:disabled){background-color:#50fa7b1a;color:#fff}.cancel-button{border-color:var(--error-color);color:var(--error-color)}.cancel-button:hover:not(:disabled){background-color:#ff6b6b1a;color:#fff}.add-translation-button{border-color:var(--success-color);color:var(--success-color)}.add-translation-button:hover:not(:disabled){background-color:#50fa7b1a;color:#fff}.source-header-actions{display:flex;align-items:center;gap:1rem}.toggle-source-btn{display:none;background:transparent;border:1px solid transparent;color:var(--text-color-secondary);cursor:pointer;padding:.25rem;border-radius:50%;align-items:center;justify-content:center}.toggle-source-btn:hover{background-color:var(--border-color);color:var(--text-color)}.toggle-source-btn .chevron-icon{transition:transform .3s ease;stroke:currentColor}.toggle-source-btn .chevron-icon.is-open{transform:rotate(180deg)}.source-header-actions>.action-button,.source-header-actions>.chapter-actions{margin-left:auto}@media (max-width: 900px){.translation-chapter-body{grid-template-columns:1fr}.toggle-source-btn{display:flex}}.translation-display-container{max-width:var(--reading-width, 90ch);margin:0 auto;padding:2rem;display:flex;flex-direction:column;gap:1.5rem}.translation-bulk-actions{display:none;justify-content:center;gap:1rem;margin-bottom:1.5rem}.translation-bulk-actions button{padding:.5rem 1rem;border:1px solid var(--border-color);background-color:transparent;color:var(--text-color-secondary);border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .2s}.translation-bulk-actions button:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.translation-bulk-actions button:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 900px){.translation-bulk-actions{display:flex}}.translation-chapters-list{display:flex;flex-direction:column;gap:3rem}.pronoun-manager-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.pronoun-manager-title{font-size:.9rem;font-weight:600;color:var(--text-color-secondary);margin:0;text-transform:uppercase;letter-spacing:.5px}.pronoun-manager-actions{display:flex;gap:.5rem}.pronoun-manager-actions button{padding:.25rem .75rem;font-size:.85rem;font-weight:500;border-radius:4px;cursor:pointer;background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);transition:all .2s}.pronoun-manager-actions button:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.pronoun-manager-actions button:disabled{opacity:.5;cursor:not-allowed}.pronoun-form{display:flex;flex-direction:column;gap:1.25rem}.pronoun-form-section{padding:1rem;border:1px solid var(--border-color);border-radius:8px;background-color:#25252a;display:flex;flex-direction:column;gap:.75rem}.pronoun-section-header h5{margin:0;font-size:.95rem;color:var(--text-color);font-weight:600}.pronoun-input-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.pronoun-input-grid.character-names{margin-bottom:-.5rem}.pronoun-input-group{display:flex;flex-direction:column;gap:.25rem}.pronoun-input-group.indirect-input{margin-top:.25rem}.pronoun-input-group label{font-size:.85rem;font-weight:500;color:var(--text-color-secondary)}.pronoun-input-group input,.pronoun-input-group select{width:100%;padding:.65rem .85rem;border-radius:6px;border:1px solid var(--border-color);background-color:#333338;color:var(--text-color);font-size:.95rem}.pronoun-input-group select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a0a0b0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem}.pronoun-input-group input[type=text]{background-color:#333338}.pronoun-input-group input:focus,.pronoun-input-group select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #4facfe40}.pronoun-error{color:var(--error-color);background-color:#ff6b6b1a;border:1px solid var(--error-color);padding:.75rem;border-radius:6px;font-size:.9rem;margin:-.5rem 0 .5rem}.pronoun-form-actions{display:flex;gap:.75rem;margin-bottom:1rem}.add-pronoun-rule-button{flex-grow:1;padding:.75rem;background-color:var(--primary-color);color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.add-pronoun-rule-button:hover:not(:disabled){background-color:var(--primary-hover-color)}.add-pronoun-rule-button:disabled{background-color:#555;cursor:not-allowed;opacity:.7}.cancel-edit-button{padding:.75rem 1rem;background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s,color .2s}.cancel-edit-button:hover:not(:disabled){background-color:#3a3a42;color:var(--text-color)}.pronoun-rule-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.75rem;max-height:250px;overflow-y:auto;padding-right:.5rem;scrollbar-width:none;-ms-overflow-style:none}.pronoun-rule-list li{background-color:#2c2c34;padding:.75rem 1rem;border-radius:6px;border:1px solid transparent;font-size:.9rem;animation:fadeInRule .3s ease;display:flex;flex-direction:column;gap:.75rem;transition:border-color .3s,box-shadow .3s}.pronoun-rule-list li.editing{border-color:var(--primary-color);box-shadow:0 0 8px #8a4fff4d}@keyframes fadeInRule{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.pronoun-rule-header{display:flex;justify-content:space-between;align-items:center;font-size:1rem}.pronoun-rule-header span{flex-grow:1;word-break:break-word;padding-right:.5rem}.pronoun-rule-list strong{color:var(--primary-color);font-weight:600}.pronoun-rule-body{display:flex;flex-direction:column;gap:.75rem;padding-top:.75rem;border-top:1px solid var(--border-color)}.pronoun-rule-details{display:flex;flex-direction:column;gap:.25rem;font-size:.9rem;color:var(--text-color-secondary)}.pronoun-rule-details p{margin:0}.pronoun-rule-details .detail-direction{font-weight:600;color:var(--text-color-secondary)}.pronoun-rule-list em{color:var(--text-color);font-style:normal;background:#ffffff1a;padding:.1em .4em;border-radius:4px;font-weight:500}.pronoun-rule-buttons{display:flex;gap:.5rem;align-items:center}.edit-rule-btn,.remove-rule-btn{background:transparent;border:none;color:var(--text-color-secondary);cursor:pointer;font-size:.9rem;line-height:1;padding:.25rem .5rem;transition:color .2s,background-color .2s;border-radius:4px}.edit-rule-btn{font-weight:500}.remove-rule-btn{font-size:1.5rem;font-weight:700}.edit-rule-btn:hover:not(:disabled){background-color:#69b3ff1a;color:#69b3ff}.remove-rule-btn:hover:not(:disabled){background-color:#ff6b6b1a;color:var(--error-color)}.pronoun-rule-list::-webkit-scrollbar{display:none}#userSuggestion{min-height:60px}.settings-toggles-container{border:1px solid var(--border-color);background-color:#24242880;padding:1rem;border-radius:8px;display:flex;flex-direction:column;gap:.75rem}.settings-toggles-title{font-size:.9rem;font-weight:600;color:var(--text-color-secondary);margin:0 0 .25rem;text-transform:uppercase;letter-spacing:.5px}.setting-toggle-item{background-color:#2c2c34;padding:.75rem 1rem;border-radius:8px}.setting-toggle-label{display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-weight:500;color:var(--text-color);font-size:.95rem}input:disabled+.slider{cursor:not-allowed;background-color:#333}input:disabled+.slider:before{background-color:#666}.toggle-sub-label{font-size:.85rem;color:var(--text-color-secondary);margin:.5rem 0 0;line-height:1.5;padding-left:.25rem}.toggle-sub-label strong{color:#e0c068;font-weight:600}.toggle-sub-label .warning-tag{color:var(--error-color);font-weight:600}.toggle-sub-label .recommended-tag{color:var(--success-color);font-weight:600}.theme-customizer{padding-top:1rem}.theme-section{margin-bottom:2rem}.theme-section h4{margin-bottom:1rem;color:var(--text-color-secondary);border-bottom:1px solid var(--border-color);padding-bottom:.5rem;font-weight:500}.theme-input-group{margin-bottom:1.25rem}.theme-input-group label{display:block;margin-bottom:.5rem;font-size:.9rem;color:var(--text-color)}.theme-input-group select,.theme-input-group input[type=text]{width:100%;padding:.6rem;background-color:var(--background-color);border:1px solid var(--border-color);color:var(--text-color);border-radius:4px;font-size:.9rem}.theme-input-group select:focus,.theme-input-group input[type=text]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.3)}.theme-input-group input[type=range]{width:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background:var(--border-color);border-radius:5px;outline:none;opacity:.7;transition:opacity .2s}.theme-input-group input[type=range]:hover{opacity:1}.theme-input-group input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;background:var(--primary-color);cursor:pointer;border-radius:50%}.theme-input-group input[type=range]::-moz-range-thumb{width:18px;height:18px;background:var(--primary-color);cursor:pointer;border-radius:50%}.colors-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem}.color-input-wrapper{display:flex;align-items:center;border:1px solid var(--border-color);border-radius:4px;overflow:hidden}.color-input-wrapper:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.3)}.color-swatch-container{position:relative;width:38px;height:38px;flex-shrink:0}.color-picker-input{position:absolute;top:0;left:0;width:100%;height:100%;padding:0;border:none;opacity:0;cursor:pointer}.color-swatch-container:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--color-picker-value);background-image:linear-gradient(45deg,#444 25%,transparent 25%),linear-gradient(-45deg,#444 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#444 75%),linear-gradient(-45deg,transparent 75%,#444 75%);background-size:10px 10px;background-position:0 0,0 5px,5px -5px,-5px 0px;z-index:1}.color-swatch-container:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--color-picker-value);z-index:2}.hex-text-input{width:100%;padding:.6rem;border:none;background:transparent;color:var(--text-color);font-family:var(--font-family-mono);font-size:.9rem;text-transform:uppercase}.hex-text-input:focus{outline:none}.reset-theme-button{width:100%;padding:.8rem 1rem;background-color:#ff646433;border:1px solid rgba(255,100,100,.4);color:#fcc;border-radius:4px;cursor:pointer;transition:all .2s ease;font-weight:500}.reset-theme-button:hover{background-color:#ff64644d;border-color:#ff646499}.color-input-wrapper{position:relative}.character-viewer-grid{max-height:300px;overflow-y:auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:.75rem;padding-right:.5rem;align-content:start;scrollbar-width:none;-ms-overflow-style:none}.character-grid-item{position:relative;width:100%;aspect-ratio:1 / 1;border-radius:8px;overflow:hidden;background-color:#2c2c34;border:none;padding:0;cursor:pointer;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out,background-color .2s;box-shadow:0 2px 5px #0000004d}.character-grid-item:hover{transform:translateY(-4px);box-shadow:0 6px 15px #0006}.character-grid-avatar{width:100%;height:100%;object-fit:cover;object-position:center top;transition:transform .3s ease}.character-grid-item:hover .character-grid-avatar{transform:scale(1.05)}.character-grid-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#3a3a42}.default-portrait-icon{width:40%;height:40%;color:var(--text-color-secondary);opacity:.5}.character-grid-name-overlay{position:absolute;bottom:0;left:0;right:0;padding:.5rem;background:linear-gradient(to top,#000000e6,#0000);color:#fff;font-size:.85rem;font-weight:600;text-align:center;text-shadow:0 1px 3px rgba(0,0,0,.8);transition:opacity .3s ease;display:flex;align-items:flex-end;justify-content:center;min-height:40%}.character-grid-name-overlay span{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;line-height:1.3;word-break:break-word;transition:color .2s ease}.character-grid-item.gender-male .character-grid-name-overlay span{color:#69b3ff}.character-grid-item.gender-female .character-grid-name-overlay span{color:#ff79c6}@media (min-width: 1024px){.character-viewer-grid{grid-template-columns:1fr;gap:.25rem}.character-grid-item{display:flex;align-items:center;gap:1.2rem;position:static;aspect-ratio:unset;width:100%;padding:.75rem;border-radius:6px;box-shadow:none;background-color:transparent;border:1px solid transparent}.character-grid-item:hover{background-color:rgba(var(--primary-color-rgb),.1);border-color:var(--border-color);transform:none;box-shadow:none}.character-grid-avatar,.character-grid-placeholder{width:44px;height:44px;flex-shrink:0;border-radius:50%;object-fit:cover;object-position:center top}.character-grid-item:hover .character-grid-avatar{transform:none}.default-portrait-icon{width:22px;height:22px}.character-grid-name-overlay{position:static;padding:0;background:none;text-shadow:none;text-align:left;color:var(--text-color);font-size:1rem;font-weight:500;flex-grow:1;min-width:0;min-height:unset;align-items:center;justify-content:flex-start}.character-grid-name-overlay span{display:block;-webkit-line-clamp:unset;line-height:1.4;word-break:unset;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease}.character-grid-item .character-grid-name-overlay span{color:inherit}}.character-viewer-empty{font-size:.9rem;font-style:italic;color:var(--text-color-secondary);text-align:center;padding:1rem 0}.character-viewer-grid::-webkit-scrollbar{display:none}.location-viewer-list{max-height:250px;overflow-y:auto;display:flex;flex-direction:column;gap:.5rem;padding-right:.5rem;scrollbar-width:none;-ms-overflow-style:none}.location-list-item{width:100%;padding:.6rem 1rem;border-radius:6px;background-color:#2c2c34;border:1px solid var(--border-color);color:var(--text-color);font-size:.95rem;font-weight:500;text-align:left;cursor:pointer;transition:all .2s ease-in-out;white-space:normal;word-break:break-word;line-height:1.4}.location-list-item:hover{transform:translate(4px);background-color:#50fa7b1a;border-color:var(--success-color);color:var(--success-color)}.location-viewer-empty{font-size:.9rem;font-style:italic;color:var(--text-color-secondary);text-align:center;padding:1rem 0}.location-viewer-list::-webkit-scrollbar{display:none}.lore-viewer-list{max-height:250px;overflow-y:auto;display:flex;flex-direction:column;gap:.5rem;padding-right:.5rem}.lore-list-item{width:100%;padding:.6rem 1rem;border-radius:6px;background-color:#2c2c34;border:1px solid var(--border-color);color:var(--text-color);font-size:.95rem;font-weight:500;text-align:left;cursor:pointer;transition:all .2s ease-in-out;white-space:normal;word-break:break-word;line-height:1.4}.lore-list-item:hover{transform:translate(4px);background-color:#f1fa8c1a;border-color:#f1fa8c;color:#f1fa8c}.lore-viewer-empty{font-size:.9rem;font-style:italic;color:var(--text-color-secondary);text-align:center;padding:1rem 0}.lore-viewer-list::-webkit-scrollbar{width:6px}.lore-viewer-list::-webkit-scrollbar-track{background:#0003;border-radius:3px}.lore-viewer-list::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:3px}.lore-viewer-list::-webkit-scrollbar-thumb:hover{background-color:#555}.chapter-index-content{display:grid;grid-template-columns:repeat(auto-fill,minmax(45px,1fr));gap:.5rem;max-height:250px;overflow-y:auto;padding:.5rem;background-color:#0003;border-radius:6px;border:1px solid var(--border-color);-ms-overflow-style:none;scrollbar-width:none}.chapter-index-button{padding:.5rem;border-radius:4px;background-color:#2c2c34;border:1px solid var(--border-color);color:var(--text-color-secondary);cursor:pointer;transition:all .2s;text-align:center;font-weight:500;font-size:.9rem}.chapter-index-button:hover:not(:disabled){background-image:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;border-color:#8a4fff;transform:scale(1.05)}.chapter-index-button:disabled{opacity:.5;cursor:not-allowed}.chapter-index-content::-webkit-scrollbar{display:none}.idea-generator-container{display:flex;flex-direction:column;gap:1rem}.generate-ideas-button{display:flex;justify-content:center;align-items:center;gap:.75rem;width:100%;padding:.75rem 1.5rem;border:1px solid #ff79c6;border-radius:8px;background-color:#ff79c61a;color:#ff79c6;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease-in-out}.generate-ideas-button:hover:not(:disabled){background-color:#ff79c633;color:#fff;box-shadow:0 0 10px #ff79c64d}.generate-ideas-button:disabled{opacity:.5;cursor:not-allowed;background-color:transparent;border-color:var(--border-color);color:#888;box-shadow:none}.generate-ideas-button .spinner{border-top-color:#ff79c6}.generated-ideas-area{margin-top:.5rem}.idea-placeholder{font-size:.9rem;font-style:italic;color:var(--text-color-secondary);text-align:center;padding:1rem;border:1px dashed var(--border-color);border-radius:8px}.ideas-list{display:flex;flex-direction:column;gap:.75rem;max-height:250px;overflow-y:auto;padding-right:.5rem;scrollbar-width:none;-ms-overflow-style:none}.idea-card{width:100%;padding:.75rem 1rem;border-radius:6px;background-color:#2c2c34;border:1px solid var(--border-color);color:var(--text-color);text-align:left;cursor:pointer;transition:all .2s ease-in-out}.idea-card:hover{transform:translate(4px);border-color:#ff79c6;background-color:#ff79c60d}.idea-title{font-size:1rem;font-weight:600;color:#ff92d0;margin:0 0 .5rem}.idea-description{font-size:.9rem;color:var(--text-color-secondary);line-height:1.6;margin:0}.clear-ideas-button{margin-top:1rem;width:100%;background:transparent;border:none;color:var(--text-color-secondary);font-size:.85rem;text-decoration:underline;cursor:pointer;padding:.5rem;transition:color .2s}.clear-ideas-button:hover{color:var(--error-color)}.ideas-list::-webkit-scrollbar{display:none}.tpm-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2500;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.tpm-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:800px;height:90vh;max-height:800px;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden}.tpm-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid var(--border-color);flex-shrink:0}.tpm-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.5rem;font-weight:700;color:var(--text-color)}.close-tpm-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-tpm-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.tpm-modal-body{padding:1.5rem 2rem;overflow-y:hidden;flex-grow:1;display:flex;flex-direction:column;gap:1rem}.tpm-modal-description{margin:0;font-size:.95rem;color:var(--text-color-secondary);line-height:1.6;flex-shrink:0}.tpm-textarea{width:100%;flex-grow:1;padding:1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-family-mono);line-height:1.7;resize:none;transition:border-color .2s,box-shadow .2s;scrollbar-width:thin;scrollbar-color:var(--border-color) transparent}.tpm-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.tpm-modal-footer{padding:1.5rem 2rem;border-top:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.tpm-modal-footer .main-actions{display:flex;gap:1rem}.tpm-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.tpm-btn.reset-btn{background-color:transparent;border:1px solid #ffb86c;color:#ffb86c}.tpm-btn.reset-btn:hover{background-color:#ffb86c1a}.tpm-btn.cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.tpm-btn.cancel-btn:hover{background-color:var(--border-color);color:var(--text-color)}.tpm-btn.save-btn{background-color:var(--success-color);color:#1a1a1d}.tpm-btn.save-btn:hover{background-color:#6beba4}.controls-panel{position:fixed;top:0;left:0;width:340px;max-width:90vw;height:100%;z-index:1001;transform:translate(-100%);transition:transform .4s cubic-bezier(.25,1,.5,1);overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.controls-panel.is-open{transform:translate(0)}.controls-panel-inner{padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem;min-height:100%;background-color:var(--color-controls-background);box-shadow:10px 0 40px #00000080}.controls-panel-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:1rem;border-bottom:1px solid var(--border-color);flex-wrap:wrap}.controls-panel-header h3{margin:0;font-size:1.5rem;font-family:var(--font-heading);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.controls-panel-stats{display:none;width:100%;justify-content:space-around;padding-top:1rem;margin-top:1rem;border-top:1px solid var(--border-color);font-size:.9rem;color:var(--text-color-secondary)}.controls-panel-stats strong{color:var(--text-color);font-weight:600}.controls-panel-stats .last-turn strong{color:#69b3ff}.close-panel-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-panel-button:hover{background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;color:transparent;transform:rotate(90deg)}.project-name-editor-panel{display:none;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}.project-name-editor-panel input{width:100%;background:transparent;border:none;color:var(--text-color);font-size:1.5rem;font-weight:700;font-family:var(--font-heading);padding:.5rem;transition:background-color .2s,box-shadow .2s;text-align:center;border-radius:6px}.project-name-editor-panel input:focus{outline:none;background-color:#ffffff0d;box-shadow:0 0 0 2px var(--primary-color)}.controls-section-collapsible{border:1px solid var(--border-color);background-color:#24242880;border-radius:8px;transition:all .3s ease}.controls-section-toggle{display:flex;justify-content:space-between;align-items:center;width:100%;padding:.75rem 1rem;background:transparent;border:none;color:var(--text-color);cursor:pointer;font-size:.9rem;font-weight:600;text-align:left;line-height:1.4;gap:.5rem}.controls-section-toggle span{color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.controls-section-content{padding:0 1rem 1rem;display:none;flex-direction:column;gap:1rem}.controls-section-content.is-open{display:flex;animation:fadeInContent .5s ease}@keyframes fadeInContent{0%{opacity:0}to{opacity:1}}.controls-subsection-title{font-size:.9rem;font-weight:600;color:var(--text-color-secondary);margin:1rem 0 .5rem;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);text-transform:uppercase;letter-spacing:.5px}.controls-subsection-title:first-of-type{margin-top:0}.plot-outline-textarea,.writing-style-textarea{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.95rem;resize:vertical;min-height:150px}.plot-outline-textarea:focus,.writing-style-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.controls-panel::-webkit-scrollbar{display:none}@media (min-width: 1024px){.close-panel-button{display:none}}@media (max-width: 1023px){.controls-panel-stats{display:flex}.project-name-editor-panel{display:block}}@media (max-width: 420px){.controls-panel{width:100%;max-width:100vw}}.control-panel-input{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.95rem}.control-panel-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.control-panel-textarea{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.95rem;resize:vertical;min-height:80px}.control-panel-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.custom-pronoun-input-group{margin-top:.5rem;padding-left:2.25rem;transition:all .3s ease-in-out}.custom-pronoun-input-group.hidden{display:none}.custom-pronoun-input{width:100%;padding:.65rem .85rem;border-radius:6px;border:1px solid var(--border-color);background-color:#333338;color:var(--text-color);font-size:.9rem}.custom-pronoun-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.create-character-button{width:100%;padding:.75rem;background-color:#50fa7b1a;border:1px solid var(--success-color);color:var(--success-color);border-radius:6px;cursor:pointer;font-weight:600;font-size:.9rem;margin-bottom:1rem;transition:background-color .2s,color .2s}.create-character-button:hover:not(:disabled){background-color:#50fa7b33;color:#fff}.create-character-button:disabled{opacity:.5;cursor:not-allowed}.create-lore-button{width:100%;padding:.75rem;background-color:#f1fa8c1a;border:1px solid #f1fa8c;color:#f1fa8c;border-radius:6px;cursor:pointer;font-weight:600;font-size:.9rem;margin-bottom:1rem;transition:background-color .2s,color .2s}.create-lore-button:hover:not(:disabled){background-color:#f1fa8c33;color:#fff}.create-lore-button:disabled{opacity:.5;cursor:not-allowed}.translation-style-item{display:flex;justify-content:space-between;align-items:center;gap:1rem}.translation-style-item .edit-prompt-btn{padding:.25rem .75rem;font-size:.8rem;font-weight:500;border-radius:4px;cursor:pointer;background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);transition:all .2s;flex-shrink:0}.translation-style-item .edit-prompt-btn:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.debug-section{margin-top:1rem;padding-top:1rem;border-top:1px dashed var(--border-color)}.debug-button{width:100%;padding:.75rem;background-color:#44475a;border:1px solid #6272a4;color:#f8f8f2;font-family:var(--font-family-mono);font-size:.9rem;cursor:pointer;border-radius:6px;transition:background-color .2s,opacity .2s}.debug-button:hover:not(:disabled){background-color:#52556a}.debug-button:disabled{opacity:.5;cursor:not-allowed;background-color:#33343f;border-color:#44475a;color:#888}.long-nsfw-toggle-wrapper{margin-bottom:1.5rem;padding:1rem;border-radius:8px;background-color:rgba(var(--error-color-rgb),.1);position:relative;border:1px solid transparent}.long-nsfw-toggle-wrapper.glow-border:before{background:radial-gradient(circle at 50% 50%,var(--error-color),#ff8b8b,var(--error-color))}.long-nsfw-toggle-wrapper .setting-toggle-item{background-color:transparent;padding:0}.long-nsfw-toggle-wrapper .setting-toggle-label span{font-size:1.1rem;font-weight:700;color:var(--error-color);text-shadow:0 0 8px rgba(var(--error-color-rgb),.5)}.long-nsfw-toggle-wrapper .toggle-sub-label{color:#fcc}.long-nsfw-toggle-wrapper .toggle-switch input:checked+.slider{background-color:var(--error-color)}.long-nsfw-toggle-wrapper .toggle-switch input:focus+.slider{box-shadow:0 0 1px var(--error-color)}.regenerate-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.regenerate-modal-content{background-color:var(--panel-background-color);padding:2rem;border-radius:12px;width:90%;max-width:550px;display:flex;flex-direction:column;gap:1rem;box-shadow:0 10px 30px #0000004d;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1)}.regenerate-modal-content h3{margin:0 0 .5rem;font-size:1.5rem;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.regenerate-modal-content p{margin:0 0 1rem;color:var(--text-color-secondary);line-height:1.6}.regenerate-modal-content textarea{width:100%;padding:.85rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);resize:vertical;line-height:1.6;transition:border-color .3s ease,box-shadow .3s ease}.regenerate-modal-content textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4facfe40}.regenerate-modal-actions{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1rem}.regenerate-modal-actions button{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.regenerate-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.regenerate-modal-actions .cancel-btn:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.regenerate-modal-actions .confirm-btn{background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #8a4fff33}.regenerate-modal-actions .confirm-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #8a4fff4d}.regenerate-modal-actions button:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (min-width: 1024px){.regenerate-modal-overlay{background-color:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}}@media (max-width: 600px){.regenerate-modal-content{padding:1.5rem}.regenerate-modal-content h3{font-size:1.3rem}.regenerate-modal-actions{flex-direction:column-reverse}.regenerate-modal-actions button{width:100%}}.refine-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.refine-modal-content{background-color:var(--panel-background-color);padding:2rem;border-radius:12px;width:90%;max-width:550px;display:flex;flex-direction:column;gap:1rem;box-shadow:0 10px 30px #0000004d;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1)}.refine-modal-content h3{margin:0 0 .5rem;font-size:1.5rem;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.refine-modal-content p{margin:0 0 1rem;color:var(--text-color-secondary);line-height:1.6}.refine-modal-content textarea{width:100%;padding:.85rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);resize:vertical;line-height:1.6;transition:border-color .3s ease,box-shadow .3s ease}.refine-modal-content textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4facfe40}.refine-modal-actions{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1rem}.refine-modal-actions button{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.refine-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.refine-modal-actions .cancel-btn:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.refine-modal-actions .confirm-btn{background:linear-gradient(45deg,var(--success-color),#3ddc84);color:#1a1a1d;box-shadow:0 4px 15px #50fa7b33}.refine-modal-actions .confirm-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #50fa7b4d}.refine-modal-actions button:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (min-width: 1024px){.refine-modal-overlay{background-color:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}}@media (max-width: 600px){.refine-modal-content{padding:1.5rem}.refine-modal-content h3{font-size:1.3rem}.refine-modal-actions{flex-direction:column-reverse}.refine-modal-actions button{width:100%}}.image-guide-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2500;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.image-guide-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards}.image-guide-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid rgba(138,79,255,.2);flex-shrink:0}.image-guide-modal-header h3{margin:0;font-family:var(--font-family-playfair-display);font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(79,172,254,.5)}.close-image-guide-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-image-guide-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.image-guide-modal-body{padding:1.5rem 2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem;line-height:1.7;color:var(--text-color-secondary);scrollbar-width:none;-ms-overflow-style:none}.image-guide-modal-body>p:first-child{font-size:1.1rem;color:var(--text-color);text-align:center;margin-bottom:.5rem}.guide-section{padding:1rem 1.5rem;border-radius:8px;background-color:#0003;border:1px solid var(--border-color)}.guide-section h4{margin:0 0 1rem;font-size:1.2rem;color:var(--text-color)}.guide-section ol{padding-left:1.5rem;margin:0 0 1rem}.pros-cons{display:flex;gap:1.5rem;font-size:.9rem}.pros,.cons{flex:1}.pros strong{color:var(--success-color)}.cons strong{color:var(--error-color)}.pros-cons ul{list-style-type:"✓  ";padding-left:1.2rem;margin-top:.5rem}.cons ul{list-style-type:"✗  "}.recommendation{font-size:1rem;text-align:center;padding:1rem;border-radius:8px;background-color:#50fa7b1a;border:1px solid rgba(80,250,123,.4)}.recommendation strong{color:var(--success-color);font-weight:600}.image-guide-modal-footer{padding:1rem 2rem 1.5rem;border-top:1px solid rgba(138,79,255,.2);display:flex;justify-content:flex-end}.image-guide-ok-button{padding:.75rem 1.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #4facfe33;transition:transform .2s ease,box-shadow .2s ease}.image-guide-ok-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #4facfe4d}.image-guide-modal-body::-webkit-scrollbar{display:none}@media (max-width: 600px){.pros-cons{flex-direction:column;gap:1rem}}@keyframes fadeInModalOverlay{0%{opacity:0}to{opacity:1}}@keyframes slideInDetailModal{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.detail-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000b3;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInModalOverlay .3s ease-out}.detail-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:900px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInDetailModal .3s cubic-bezier(.25,1,.5,1) forwards}.detail-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 2rem;border-bottom:1px solid var(--border-color);flex-shrink:0}.detail-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.75rem;font-weight:700;color:var(--text-color);transition:color .3s ease}.detail-modal-content.gender-male .detail-modal-header h3{color:#69b3ff}.detail-modal-content.gender-female .detail-modal-header h3{color:#ff79c6}.detail-modal-header-actions{display:flex;align-items:center;gap:.75rem}.detail-modal-edit-btn,.detail-modal-enrich-btn{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);cursor:pointer;font-size:.9rem;font-weight:500;padding:.5rem 1rem;border-radius:6px;transition:all .2s;display:flex;align-items:center;gap:.5rem}.detail-modal-edit-btn:hover:not(:disabled){border-color:#f1fa8c;color:#f1fa8c;background-color:#f1fa8c1a}.detail-modal-enrich-btn{border-color:#69b3ff;color:#69b3ff}.detail-modal-enrich-btn:hover:not(:disabled){background-color:#69b3ff1a;color:#fff}.detail-modal-enrich-btn:disabled{opacity:.6;cursor:not-allowed}.close-detail-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s;margin-left:1rem}.close-detail-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.detail-modal-body{padding:1.5rem 2rem;overflow-y:auto;flex-grow:1;display:flex;flex-direction:column;min-height:0}.detail-modal-grid-body{display:grid;grid-template-columns:320px 1fr;gap:2rem;padding:1.5rem 2rem;overflow:hidden;flex-grow:1}.detail-modal-portrait-panel{display:flex;flex-direction:column;gap:1rem;min-height:0}.character-portrait-modal-large{width:100%;aspect-ratio:1 / 1.2;border-radius:8px;overflow:hidden;position:relative;background-color:#212125;border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;transition:border-color .3s ease}.detail-modal-content.gender-male .character-portrait-modal-large{border-color:#69b3ff}.detail-modal-content.gender-female .character-portrait-modal-large{border-color:#ff79c6}.character-portrait-modal-large img{width:100%;height:100%;object-fit:cover}.portrait-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;color:var(--text-color-secondary)}.portrait-placeholder .default-portrait-icon-modal{width:48px;height:48px}.portrait-placeholder span{font-size:.9rem;font-weight:500}.portrait-edit-controls{display:flex;flex-direction:column;gap:.75rem}.portrait-url-input-group{display:flex;align-items:center;gap:.5rem}.portrait-url-input-group input[type=text]{flex-grow:1;width:100%;padding:.6rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.9rem}.help-icon-button{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:50%;border:1px solid var(--border-color);background-color:#3a3a42;color:var(--text-color-secondary);cursor:pointer;transition:all .2s}.help-icon-button:hover{color:var(--primary-color);border-color:var(--primary-color);background-color:#4facfe1a}.portrait-edit-actions{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.portrait-edit-controls .upload-btn,.portrait-edit-controls .remove-btn,.portrait-edit-controls .analyze-btn{width:auto;padding:.6rem;border-radius:6px;font-weight:500;cursor:pointer;border:1px solid var(--border-color);transition:all .2s}.portrait-edit-controls .upload-btn{background-color:#3a3a42;color:var(--text-color)}.portrait-edit-controls .upload-btn:hover:not(:disabled){background-color:#4a4a52;border-color:var(--primary-color)}.portrait-edit-controls .remove-btn{background-color:#ff6b6b1a;border-color:var(--error-color);color:var(--error-color)}.portrait-edit-controls .remove-btn:hover:not(:disabled){background-color:#ff6b6b33;color:#fff}.portrait-edit-controls .analyze-btn{background-color:#4facfe1a;border-color:var(--primary-color);color:var(--primary-color);display:flex;align-items:center;justify-content:center;gap:.5rem}.portrait-edit-controls .analyze-btn:hover:not(:disabled){background-color:#4facfe33;color:#fff}.portrait-edit-controls .analyze-btn:disabled{opacity:.6;cursor:not-allowed;background-color:transparent;border-color:var(--border-color);color:var(--text-color-secondary)}.portrait-edit-controls .analyze-btn .spinner{width:14px;height:14px;border-width:2px;border-top-color:var(--primary-color)}.portrait-error{font-size:.85rem;color:var(--error-color);text-align:center;margin:0}.detail-modal-info-panel{display:flex;flex-direction:column;min-height:0}.modal-tab-header{display:flex;border-bottom:1px solid var(--border-color);flex-shrink:0}.modal-tab-button{padding:.75rem 1.5rem;cursor:pointer;background-color:transparent;border:none;color:var(--text-color-secondary);font-size:1rem;font-weight:500;border-bottom:3px solid transparent;margin-bottom:-1px;transition:all .2s}.modal-tab-button.active{color:var(--text-color);border-bottom-color:var(--primary-color)}.modal-tab-button:hover:not(.active){color:var(--text-color);background-color:#ffffff0d}.modal-tab-content{flex-grow:1;overflow-y:auto;padding:1.5rem 1rem 1.5rem 0;display:flex;flex-direction:column;gap:1.25rem;scrollbar-width:none;-ms-overflow-style:none}.modal-tab-content::-webkit-scrollbar{display:none}.no-attributes-text{font-style:italic;color:var(--text-color-secondary);font-size:.9rem}.voice-sample-display{font-style:italic;background-color:#00000026;padding:.5rem .75rem;border-radius:6px;border-left:3px solid var(--primary-color)}.custom-attributes-section{margin-top:.5rem;padding-top:1rem;border-top:1px solid var(--border-color);display:flex;flex-direction:column;gap:1rem}.custom-attributes-section h4{margin:0;font-size:1rem;font-weight:600;color:var(--text-color)}.detail-modal-input,.detail-modal-textarea,.detail-modal-select{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);line-height:1.6;transition:border-color .2s,box-shadow .2s}.detail-modal-textarea{resize:vertical;min-height:80px}.detail-modal-input:focus,.detail-modal-textarea:focus,.detail-modal-select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.custom-attribute-edit-list{display:flex;flex-direction:column;gap:.75rem}.custom-attribute-edit-item{display:flex;flex-wrap:wrap;align-items:center;gap:.5rem;background-color:#25252a;padding:.5rem;border-radius:6px}.custom-attribute-edit-item input{flex:1 1 120px;background-color:#333338;border:1px solid var(--border-color);color:var(--text-color);padding:.5rem;border-radius:4px;font-size:.9rem}.custom-attribute-edit-item input:focus{outline:none;border-color:var(--primary-color)}.custom-attribute-edit-item .remove-attr-btn{background-color:transparent;border:none;color:var(--text-color-secondary);cursor:pointer;font-size:1.5rem;line-height:1;padding:0 .5rem;transition:color .2s;flex-shrink:0}.custom-attribute-edit-item .remove-attr-btn:hover{color:var(--error-color)}.add-attr-btn{align-self:flex-start;margin-top:.5rem;padding:.4rem .8rem;font-size:.85rem;font-weight:500;border-radius:4px;cursor:pointer;background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);transition:all .2s}.add-attr-btn:hover{background-color:var(--border-color);color:var(--text-color)}.detail-modal-footer{padding:1rem 2rem;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:.75rem;flex-shrink:0}.detail-modal-action-btn{padding:.6rem 1.2rem;border:none;border-radius:6px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s}.detail-modal-action-btn.cancel{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.detail-modal-action-btn.cancel:hover{background-color:#3a3a42;color:var(--text-color)}.detail-modal-action-btn.save{background-color:var(--success-color);color:#1a1a1d}.detail-modal-action-btn.save:hover{background-color:#6beba4}.big-five-sliders{display:flex;flex-direction:column;gap:1.5rem}.big-five-item{display:flex;flex-direction:column;gap:.5rem}.big-five-label-row{display:flex;justify-content:space-between;align-items:baseline;font-size:.9rem}.big-five-label{font-weight:600;color:var(--text-color)}.big-five-value{font-family:var(--font-family-mono);color:var(--text-color-secondary);background-color:#0003;padding:.1rem .4rem;border-radius:4px}.big-five-description{display:flex;justify-content:space-between;font-size:.8rem;color:var(--text-color-secondary)}.emotion-state-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.25rem}.emotion-item{display:flex;flex-direction:column;gap:.5rem}.emotion-label-row{display:flex;justify-content:space-between;align-items:baseline;font-size:.9rem}.emotion-label{font-weight:600;color:var(--text-color);text-transform:capitalize}.emotion-value{font-family:var(--font-family-mono);color:var(--text-color-secondary)}.emotion-bar{width:100%;height:8px;background-color:#25252a;border-radius:4px;overflow:hidden;border:1px solid var(--border-color)}.emotion-bar-inner{height:100%;border-radius:4px;transition:width .3s ease-in-out}.emotion-bar-inner.anger{background:#ff6b6b}.emotion-bar-inner.joy{background:#50fa7b}.emotion-bar-inner.sadness{background:#69b3ff}.emotion-bar-inner.fear{background:#bd93f9}.emotion-bar-inner.surprise{background:#f1fa8c}.emotion-bar-inner.trust{background:#ffb86c}.drift-history-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.75rem;max-height:150px;overflow-y:auto;padding:.75rem;background-color:#25252a;border-radius:6px}.drift-history-item{font-size:.85rem;line-height:1.5;color:var(--text-color-secondary)}.drift-history-item strong{color:var(--text-color);font-weight:600}.drift-history-item .reason{font-style:italic;opacity:.8}@media (max-width: 768px){.detail-modal-header{flex-direction:column;align-items:center;gap:1rem}.detail-modal-header h3{text-align:center}.detail-modal-content{max-width:95vw;width:95vw}.detail-modal-body{padding:1.5rem}.detail-modal-grid-body{display:block;overflow-y:auto;padding:1.5rem}.detail-modal-portrait-panel{max-width:100%;margin:0 auto 1.5rem}.modal-tab-content{padding-right:0}.character-portrait-modal-large{max-height:400px;aspect-ratio:unset}}.enrichment-review-body{padding:1.5rem 2rem;overflow-y:auto;flex-grow:1;display:flex;flex-direction:column;gap:1rem}.enrichment-review-body h4{margin:0;font-size:1.5rem;font-family:var(--font-heading);color:var(--text-color);text-align:center}.enrichment-subtitle{text-align:center;color:var(--text-color-secondary);line-height:1.6;margin:0;margin-top:-.5rem;margin-bottom:1rem}.enrichment-suggestions-form{display:flex;flex-direction:column;gap:1.5rem}.enrichment-comparison-item{display:flex;flex-direction:column;gap:.5rem}.enrichment-comparison-item>label{font-size:1rem;font-weight:600;color:var(--text-color);padding-bottom:.5rem;border-bottom:1px solid var(--border-color)}.comparison-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.current-value,.suggested-value{display:flex;flex-direction:column;gap:.5rem}.current-value h6,.suggested-value h6{margin:0;font-size:.8rem;font-weight:500;text-transform:uppercase;color:var(--text-color-secondary)}.current-value p{margin:0;padding:.75rem;background-color:#00000026;border-radius:6px;line-height:1.6;white-space:pre-wrap;min-height:40px;border:1px solid var(--border-color);flex-grow:1}.current-value p em{font-style:italic;opacity:.7}.enrichment-error{text-align:center;color:var(--error-color);background-color:#ff6b6b1a;border:1px solid var(--error-color);padding:1rem;border-radius:8px;margin-top:1rem}@media (max-width: 768px){.comparison-grid{grid-template-columns:1fr}}.detail-modal-content.location-modal .character-type-tag{background-color:#50fa7b1a;border-color:#50fa7b4d;color:#50fa7b}.modal-info-item.hierarchy{gap:.5rem}.hierarchy-button{background:transparent;border:1px solid var(--border-color);color:var(--text-color);padding:.5rem 1rem;border-radius:6px;font-size:1rem;font-weight:500;cursor:pointer;text-align:left;transition:all .2s;align-self:flex-start}.hierarchy-button:hover:not(:disabled){border-color:var(--success-color);background-color:#50fa7b1a;color:var(--success-color)}.hierarchy-button:disabled{opacity:.6;cursor:not-allowed;border-color:var(--border-color);color:var(--text-color-secondary)}.detail-modal-content.lore-modal .character-type-tag{background-color:#f1fa8c1a;border-color:#f1fa8c4d;color:#f1fa8c}.modal-info-item{display:flex;flex-direction:column;gap:.25rem}.modal-info-item strong{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase}.modal-info-item span,.modal-info-item p{font-size:1rem;line-height:1.7;color:var(--text-color);margin:0}.co-writer-menu{position:absolute;z-index:1500;background-color:var(--panel-background-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:0 5px 20px #0006;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;flex-direction:column;overflow:hidden;min-width:240px}@keyframes fadeInMenuTop{0%{opacity:0;transform:translate(-50%,-100%) translateY(0) scale(.95)}to{opacity:1;transform:translate(-50%,-100%) translateY(-10px) scale(1)}}@keyframes fadeInMenuBottom{0%{opacity:0;transform:translate(-50%) translateY(0) scale(.95)}to{opacity:1;transform:translate(-50%) translateY(10px) scale(1)}}.co-writer-menu.placement-top{transform:translate(-50%,-100%) translateY(-10px);animation:fadeInMenuTop .2s cubic-bezier(.25,1,.5,1)}.co-writer-menu.placement-bottom{transform:translate(-50%) translateY(10px);animation:fadeInMenuBottom .2s cubic-bezier(.25,1,.5,1)}.co-writer-header{padding:.5rem .75rem;font-size:.8rem;font-weight:600;color:var(--text-color-secondary);background-color:#0003;border-bottom:1px solid var(--border-color)}.co-writer-loading{display:flex;align-items:center;gap:.5rem}.co-writer-loading .spinner{width:12px;height:12px;border-width:2px}.co-writer-actions{display:flex;flex-direction:column}.co-writer-action-btn,.co-writer-more-btn{background:transparent;border:none;color:var(--text-color);padding:.75rem 1rem;text-align:left;cursor:pointer;font-size:.95rem;transition:background-color .2s,color .2s;border-bottom:1px solid var(--border-color);width:100%;display:flex;align-items:center;gap:.75rem}.co-writer-action-btn:last-child,.co-writer-more-btn:last-child{border-bottom:none}.co-writer-action-btn:hover,.co-writer-more-btn:hover{background-color:var(--primary-color);color:#fff}.co-writer-more-btn{color:var(--text-color-secondary);font-style:italic;justify-content:center}.co-writer-action-btn svg{width:16px;height:16px;flex-shrink:0;opacity:.7;stroke-width:2.5}.co-writer-action-btn:hover svg{opacity:1}.logic-check-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2100;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.logic-check-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:600px;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1);max-height:90vh}.logic-check-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid rgba(138,79,255,.2);flex-shrink:0}.logic-check-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#f1fa8c,#e0c068);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(241,250,140,.5)}.close-logic-check-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-logic-check-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.logic-check-modal-body{padding:1.5rem 2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem}.logic-section h4{margin:0 0 .75rem;font-size:1rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.original-text-display{background-color:#0003;border:1px solid var(--border-color);padding:1rem;border-radius:8px;font-style:italic;color:var(--text-color);line-height:1.7}.feedback-display{padding:1rem 1.5rem;border-radius:8px;line-height:1.7;font-size:1.05rem;font-weight:500;border-left-width:4px;border-left-style:solid}.feedback-display.consistent{background-color:#50fa7b1a;border-color:var(--success-color);color:var(--text-color)}.feedback-display.contradiction{background-color:#ff6b6b1a;border-color:var(--error-color);color:var(--text-color)}.logic-check-modal-footer{padding:1rem 2rem 1.5rem;border-top:1px solid rgba(138,79,255,.2);display:flex;justify-content:flex-end}.logic-check-ok-button{padding:.75rem 1.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #4facfe33;transition:transform .2s ease,box-shadow .2s ease}.logic-check-ok-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #4facfe4d}.logic-check-modal-body::-webkit-scrollbar{width:8px}.logic-check-modal-body::-webkit-scrollbar-track{background:transparent}.logic-check-modal-body::-webkit-scrollbar-thumb{background-color:#8a4fff4d;border-radius:4px}@media (max-width: 600px){.logic-check-modal-header{padding:1rem 1.5rem}.logic-check-modal-header h3{font-size:1.4rem}.logic-check-modal-body{padding:1.5rem}.logic-check-ok-button{width:100%}}.script-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.script-modal-content{background-color:var(--background-color);padding:0;border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1);overflow:hidden;transition:width .4s ease-in-out,max-width .4s ease-in-out,height .4s ease-in-out,max-height .4s ease-in-out,border-radius .4s ease-in-out}.script-modal-header{padding:2rem 2.5rem 1rem;flex-shrink:0;display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.header-text-content{flex-grow:1}.script-modal-header h3{margin:0 0 .5rem;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;text-align:left;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.script-modal-header p{margin:0;color:var(--text-color-secondary);line-height:1.6;text-align:left}.expand-script-btn{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}.expand-script-btn:hover{color:var(--primary-color);border-color:var(--primary-color);transform:scale(1.1) rotate(90deg)}.script-modal-content.is-expanded{width:95vw;max-width:1600px;height:95vh;max-height:95vh}.script-modal-body{flex-grow:1;min-height:0;display:flex;flex-direction:column;overflow-y:auto;padding:0 .5rem;margin:0 2rem;scrollbar-width:none;-ms-overflow-style:none}.script-modal-body::-webkit-scrollbar{display:none}.script-loading-placeholder{width:100%;flex-grow:1;display:flex;align-items:center;justify-content:center;border:1px dashed var(--border-color);border-radius:8px;background-color:#0003}.script-modal-body textarea{width:100%;flex-grow:1;padding:1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);resize:none;line-height:1.7;transition:border-color .3s ease,box-shadow .3s ease;scrollbar-width:none;-ms-overflow-style:none}.script-modal-body textarea::-webkit-scrollbar{display:none}.script-modal-footer{padding:1.5rem 2.5rem 2rem;border-top:1px solid var(--border-color);margin-top:1rem;flex-shrink:0;display:flex;flex-direction:column;gap:1.5rem}.script-refinement-area{border:1px solid var(--border-color);background-color:#24242880;border-radius:8px;transition:all .3s ease}.refinement-toggle-btn{display:flex;justify-content:space-between;align-items:center;width:100%;padding:.75rem 1rem;background:transparent;border:none;color:var(--text-color);cursor:pointer;font-size:.95rem;font-weight:600;text-align:left}.refinement-toggle-btn span{color:var(--text-color-secondary)}.refinement-toggle-btn:hover span{color:var(--text-color)}.chevron-icon{transition:transform .3s ease;stroke:var(--text-color-secondary);flex-shrink:0}.chevron-icon.is-open{transform:rotate(180deg)}.refinement-controls{max-height:0;overflow:hidden;opacity:0;transition:max-height .4s ease-in-out,opacity .4s ease-in-out,padding .4s ease-in-out;display:flex;flex-direction:column;gap:.75rem;padding:0 1rem}.refinement-controls.visible{max-height:300px;opacity:1;padding:0 1rem 1rem}.refinement-controls textarea{min-height:80px;max-height:150px;resize:vertical}.refinement-controls .script-btn.refine-btn{align-self:flex-end}.script-modal-actions{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}.main-actions-group{display:flex;gap:1rem;flex-wrap:wrap}.script-modal-actions .script-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.script-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.script-modal-actions .cancel-btn:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.script-modal-actions .secondary-btn{background-color:transparent;border:1px solid #ffb86c;color:#ffb86c}.script-modal-actions .secondary-btn:hover:not(:disabled){background-color:#ffb86c1a;color:#fff}.script-modal-actions .secondary-btn .spinner{border-top-color:#ffb86c}.script-btn.refine-btn{background-color:transparent;border:1px solid #f1fa8c;color:#f1fa8c}.script-btn.refine-btn:hover:not(:disabled){background-color:#f1fa8c1a;color:#fff}.script-btn.refine-btn .spinner{border-top-color:#f1fa8c}.script-modal-actions .confirm-btn{background:linear-gradient(45deg,var(--primary-color),var(--primary-hover-color));color:#fff;box-shadow:0 4px 15px #4facfe33}.script-modal-actions .confirm-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #4facfe4d}.script-modal-actions .script-btn:disabled,.script-btn.refine-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.script-modal-content.is-expanded{width:100%;height:100%;max-width:100vw;max-height:100vh;top:0;left:0;transform:none;border-radius:0}}@media (max-width: 600px){.script-modal-header{flex-direction:row;align-items:center;gap:1rem;padding:1.5rem;text-align:left}.script-modal-header h3{font-size:1.6rem}.script-modal-header p{font-size:.95rem;margin-bottom:.5rem}.script-modal-body{margin:0 1rem;padding:0 .5rem}.script-modal-footer{padding:1.5rem}.script-modal-actions{flex-direction:column-reverse;width:100%}.main-actions-group{width:100%;display:flex;flex-direction:column;gap:.75rem}.script-modal-actions .script-btn{width:100%}}.creator-editor-view{display:grid;grid-template-columns:280px 1fr;gap:2rem;min-height:0}.creator-editor-form .detail-modal-input,.creator-editor-form .detail-modal-textarea,.creator-editor-form .detail-modal-select{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);line-height:1.6}.creator-editor-form .detail-modal-input:focus,.creator-editor-form .detail-modal-textarea:focus,.creator-editor-form .detail-modal-select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.creator-editor-form .custom-attributes-section{margin-top:.5rem;padding-top:1rem;border-top:1px solid var(--border-color);display:flex;flex-direction:column;gap:1rem}.creator-editor-form .custom-attributes-section h4{margin:0;font-size:1rem;font-weight:600;color:var(--text-color)}.creator-editor-form .custom-attribute-edit-list{display:flex;flex-direction:column;gap:.75rem}@media (max-width: 768px){.creator-editor-view{grid-template-columns:1fr}.creator-editor-form{padding-right:0;overflow-y:visible}.character-creator-modal-body{padding:1.5rem}}.lore-creator-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2200;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.lore-creator-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden}.lore-creator-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid var(--border-color);flex-shrink:0}.lore-creator-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;color:var(--text-color)}.close-creator-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-creator-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.lore-creator-modal-body{padding:2rem;overflow-y:auto;flex-grow:1;display:flex;flex-direction:column;gap:1.5rem;scrollbar-width:none;-ms-overflow-style:none}.lore-creator-modal-body::-webkit-scrollbar{display:none}.creator-prompt-view .input-group label{font-size:1.1rem;font-weight:600}.creator-prompt-view .input-group textarea{min-height:120px;font-size:1.1rem}.creator-editor-form-lore{overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem;scrollbar-width:none;-ms-overflow-style:none;padding-right:1rem}.creator-editor-form-lore::-webkit-scrollbar{display:none}.creator-editor-form-lore .modal-info-item{display:flex;flex-direction:column;gap:.25rem}.creator-editor-form-lore .modal-info-item strong{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase}.creator-editor-form-lore .detail-modal-input,.creator-editor-form-lore .detail-modal-textarea{width:100%;padding:.75rem 1rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);line-height:1.6;transition:border-color .2s,box-shadow .2s}.creator-editor-form-lore .detail-modal-textarea{resize:vertical;min-height:80px}.creator-editor-form-lore .detail-modal-input:focus,.creator-editor-form-lore .detail-modal-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.creator-loading-view{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:1rem}.creator-loading-view .spinner{width:40px;height:40px;border-width:4px}.creator-loading-view p{font-size:1.1rem;color:var(--text-color-secondary)}.lore-creator-modal-footer{padding:1rem 2rem;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:.75rem;flex-shrink:0;background-color:#0003}.script-continuation-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.script-continuation-modal-content{background-color:var(--background-color);padding:0;border-radius:12px;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #50fa7b1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden;transition:width .4s ease-in-out,max-width .4s ease-in-out,height .4s ease-in-out,max-height .4s ease-in-out,top .4s ease-in-out,left .4s ease-in-out,transform .4s ease-in-out,border-radius .4s ease-in-out}.script-continuation-modal-header{padding:2rem 2.5rem 1rem;flex-shrink:0;display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.continuation-header-text-content{flex-grow:1}.script-continuation-modal-header h3{margin:0 0 .5rem;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;text-align:left;background:linear-gradient(45deg,#50fa7b,#3ddc84);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.script-continuation-modal-header p{margin:0;color:var(--text-color-secondary);line-height:1.6;text-align:left}.expand-continuation-btn{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}.expand-continuation-btn:hover{color:var(--success-color);border-color:var(--success-color);transform:scale(1.1) rotate(90deg)}.script-continuation-modal-content.is-expanded{width:95vw;max-width:1600px;height:95vh;max-height:95vh}.script-continuation-modal-body{flex-grow:1;min-height:0;display:flex;flex-direction:column;overflow-y:auto;padding:0 .5rem;margin:0 2rem;scrollbar-width:thin;scrollbar-color:var(--border-color) transparent}.script-continuation-modal-body textarea{width:100%;flex-grow:1;padding:1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);resize:none;line-height:1.7}.script-continuation-modal-footer{padding:1.5rem 2.5rem 2rem;border-top:1px solid var(--border-color);margin-top:1rem;flex-shrink:0;display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}.script-continuation-modal-actions .script-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.script-continuation-modal-actions .finish-btn{background-color:transparent;border:1px solid #ffb86c;color:#ffb86c}.script-continuation-modal-actions .finish-btn:hover:not(:disabled){background-color:#ffb86c1a;color:#fff}.script-continuation-modal-actions .continue-btn{background:linear-gradient(45deg,var(--success-color),#3ddc84);color:#1a1a1d;box-shadow:0 4px 15px #50fa7b33}.script-continuation-modal-actions .continue-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #50fa7b4d}.script-continuation-modal-actions .script-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}.reading-width-slider-container{display:none;align-items:center;gap:.75rem;color:var(--text-color-secondary)}@media (min-width: 1024px){.reading-width-slider-container{display:flex}}.reading-width-slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:120px;height:4px;background:var(--border-color);border-radius:2px;outline:none;transition:opacity .2s}.reading-width-slider:hover{opacity:1}.reading-width-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:16px;height:16px;background:var(--primary-color);cursor:pointer;border-radius:50%;border:2px solid var(--background-color)}.reading-width-slider::-moz-range-thumb{width:16px;height:16px;background:var(--primary-color);cursor:pointer;border-radius:50%;border:2px solid var(--background-color)}.debug-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2100;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.debug-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:900px;height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden}.debug-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid #6272a4;flex-shrink:0}.debug-modal-header h3{margin:0;font-family:var(--font-family-mono);font-size:1.5rem;font-weight:600;color:#bd93f9}.close-debug-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-debug-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.debug-modal-body{padding:1.5rem 2rem;overflow:hidden;flex-grow:1;display:grid;grid-template-columns:1fr;gap:1.5rem}.debug-prompt-section{display:flex;flex-direction:column;gap:.75rem;min-height:0}.debug-prompt-section label{font-size:1rem;font-weight:600;color:#f1fa8c;font-family:var(--font-family-mono)}.debug-prompt-section textarea{width:100%;flex-grow:1;padding:1rem;border-radius:8px;border:1px solid #44475a;background-color:#282a36;color:#f8f8f2;font-size:.95rem;font-family:var(--font-family-source-code-pro);line-height:1.7;resize:none;transition:border-color .2s,box-shadow .2s;scrollbar-width:thin;scrollbar-color:#44475a #282a36}.debug-prompt-section textarea::-webkit-scrollbar{width:8px}.debug-prompt-section textarea::-webkit-scrollbar-thumb{background-color:#44475a;border-radius:4px}.debug-prompt-section textarea:focus{outline:none;border-color:#bd93f9;box-shadow:0 0 0 2px #bd93f94d}.debug-modal-footer{padding:1rem 2rem;border-top:1px solid #6272a4;display:flex;justify-content:flex-end;gap:1rem;flex-shrink:0;flex-wrap:wrap}.debug-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.debug-btn.cancel-btn{background-color:transparent;border:1px solid #6272a4;color:#f8f8f2}.debug-btn.cancel-btn:hover:not(:disabled){background-color:#44475a}.debug-btn.secondary-btn{background-color:transparent;border:1px solid #ffb86c;color:#ffb86c}.debug-btn.secondary-btn:hover:not(:disabled){background-color:#ffb86c1a;color:#fff}.debug-btn.secondary-btn .spinner{border-top-color:#ffb86c}.debug-btn.confirm-btn{background-color:#50fa7b;color:#282a36}.debug-btn.confirm-btn:hover:not(:disabled){background-color:#6afb94}.debug-btn:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.debug-modal-body{grid-template-rows:1fr}}.creator-btn.skip-all{margin-right:auto;background-color:transparent;border:1px solid #ffb86c;color:#ffb86c}.creator-btn.skip-all:hover{background-color:#ffb86c1a}.character-creator-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2200;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.character-creator-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:800px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden}.character-creator-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid var(--border-color);flex-shrink:0}.character-creator-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;color:var(--text-color)}.character-creator-modal-body{padding:2rem;overflow-y:auto;flex-grow:1;display:flex;flex-direction:column;gap:1.5rem;scrollbar-width:none;-ms-overflow-style:none}.character-creator-modal-body::-webkit-scrollbar{display:none}.creator-editor-form{overflow-y:auto;display:flex;flex-direction:column;gap:1rem;scrollbar-width:none;-ms-overflow-style:none;padding-right:1rem}.creator-editor-form::-webkit-scrollbar{display:none}.character-creator-modal-footer{padding:1rem 2rem;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:.75rem;flex-shrink:0;background-color:#0003}.creator-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.creator-btn.generate{background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));color:#fff;display:flex;align-items:center;gap:.5rem}.creator-btn.generate:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px rgba(var(--primary-color-rgb),.2)}.creator-btn.generate:disabled{opacity:.6;cursor:not-allowed}.creator-btn.cancel{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.creator-btn.cancel:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color)}.creator-editor-form .modal-info-item{display:flex;flex-direction:column;gap:.25rem}.creator-editor-form .modal-info-item strong{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase}.creator-editor-form .detail-modal-input,.creator-editor-form .detail-modal-textarea{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:1rem;font-family:var(--font-body);line-height:1.6}.creator-editor-form .detail-modal-textarea{resize:vertical;min-height:80px}.creator-editor-form .detail-modal-input:focus,.creator-editor-form .detail-modal-textarea:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.merge-modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000000d9;z-index:2300;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.merge-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:800px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080;animation:slideInModal .3s cubic-bezier(.25,1,.5,1)}.merge-modal-header{padding:1.5rem 2rem;border-bottom:1px solid var(--border-color)}.merge-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.8rem;color:var(--text-color)}.merge-modal-body{padding:1.5rem 2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1rem}.merge-modal-body>p{margin:0;color:var(--text-color-secondary)}.merge-comparison-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.merge-column h4{margin:0 0 .75rem;font-size:1rem;text-transform:uppercase}.keep-column h4{color:var(--success-color)}.delete-column h4{color:var(--error-color)}.delete-column{display:flex;flex-direction:column;gap:1rem}.entity-card{background-color:var(--panel-background-color);border:1px solid var(--border-color);padding:1rem;border-radius:8px}.entity-card strong{color:var(--text-color);display:block;margin-bottom:.5rem}.entity-card p{margin:0;font-size:.9rem;color:var(--text-color-secondary);display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis}.merge-explanation{font-style:italic;text-align:center;font-size:.9rem}.merge-modal-footer{padding:1.5rem 2rem;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:1rem}.merge-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.skip-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.skip-btn:hover{background-color:var(--border-color);color:var(--text-color)}.confirm-btn{background-color:var(--primary-color);color:#fff}.confirm-btn:hover{background-color:var(--primary-hover-color)}.writing-view-reimagined{display:flex;flex-direction:column;flex-grow:1;width:100%;min-height:0;overflow:hidden}.writing-top-bar{display:flex;align-items:center;gap:1.5rem;padding:.75rem 2rem;background:rgba(var(--background-color-rgb, 26, 26, 29),.9);border-bottom:1px solid rgba(var(--secondary-color-rgb),.4);width:100%;position:sticky;top:0;z-index:100;flex-shrink:0}.exit-button-reimagined{background:transparent;border:1px solid transparent;color:var(--text-color-secondary);padding:.5rem 1rem;border-radius:6px;cursor:pointer;transition:all .2s ease;font-weight:500;white-space:nowrap}.exit-button-reimagined:hover{background-color:rgba(var(--secondary-color-rgb),.1);border-color:rgba(var(--secondary-color-rgb),.5);background-image:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.project-name-editor-topbar{flex-grow:1;min-width:100px}.project-name-editor-topbar input{width:100%;max-width:500px;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--text-color);font-size:1.2rem;font-weight:600;font-family:var(--font-heading);padding:.5rem 0;transition:border-color .3s ease}.project-name-editor-topbar input:focus{outline:none;border-bottom-color:var(--primary-color)}.top-bar-stats{display:flex;gap:1.5rem;color:var(--text-color-secondary);font-size:.9rem;align-items:center}.top-bar-stats strong{color:var(--success-color);font-weight:600}.top-bar-stats .last-turn strong{color:#69b3ff}.controls-toggle-button{padding:.6rem 1.2rem;font-size:1rem;font-weight:600;border:2px solid rgba(var(--secondary-color-rgb),.4);border-radius:50px;cursor:pointer;transition:all .3s ease;background-color:#2d374880;background-image:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;white-space:nowrap}.controls-toggle-button:hover{transform:translateY(-2px);border-color:var(--primary-hover-color);background-color:#2d3748b3;box-shadow:0 0 15px rgba(var(--secondary-color-rgb),.3)}.writing-view-body{display:flex;flex-grow:1;position:relative;min-height:0}.writing-content-area{flex-grow:1;width:100%;overflow-y:auto;padding:2rem 0;position:relative;scrollbar-width:none;-ms-overflow-style:none}.writing-content-area::-webkit-scrollbar{display:none}.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#0009;z-index:1000;animation:fadeInOverlay .3s ease}@media (min-width: 1024px){.writing-top-bar{background:rgba(var(--background-color-rgb, 26, 26, 29),.7);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.controls-toggle-button,.overlay{display:none!important}.controls-panel{position:static!important;transform:none!important;width:380px;flex-shrink:0;box-shadow:none;border-right:1px solid var(--border-color)}}@media (max-width: 1023px){.writing-top-bar{padding:.75rem 1rem;gap:.75rem;justify-content:space-between}.top-bar-stats,.project-name-editor-topbar{display:none}}@keyframes fadeInNsfwOverlay{0%{opacity:0}to{opacity:1}}@keyframes slideInNsfwModal{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.nsfw-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInNsfwOverlay .3s ease-out}.nsfw-modal-content{background-color:var(--background-color);padding:2.5rem;border-radius:12px;width:90%;max-width:520px;display:flex;flex-direction:column;gap:.75rem;box-shadow:0 10px 40px #00000080,0 0 25px #ff6b6b1a;position:relative;animation:slideInNsfwModal .3s cubic-bezier(.25,1,.5,1);text-align:center}.nsfw-modal-content h3{margin:0 0 .5rem;font-family:var(--font-family-playfair-display);font-size:2rem;font-weight:700;background:linear-gradient(45deg,#ff8b8b,var(--error-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(255,107,107,.5)}.nsfw-modal-content p{margin:0 0 .5rem;color:var(--text-color);line-height:1.6;font-size:1.1rem}.nsfw-modal-content .modal-sub-text{font-size:.95rem;font-weight:600;color:#d1c8b3;margin-bottom:1.5rem}.nsfw-modal-actions{display:flex;justify-content:center;gap:1rem;margin-top:1rem;flex-wrap:wrap}.nsfw-modal-actions .modal-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;min-width:150px}.nsfw-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);order:3}.nsfw-modal-actions .cancel-btn:hover:not(:disabled){background-color:#ffffff0d;color:var(--text-color)}.nsfw-modal-actions .secondary-btn{background-color:transparent;border:1px solid rgba(224,192,104,.4);color:#d1c8b3;order:2}.nsfw-modal-actions .secondary-btn:hover:not(:disabled){background-color:#e0c0681a;color:#fff}.nsfw-modal-actions .confirm-btn{background-color:var(--error-color);color:#fff;box-shadow:0 4px 15px #ff6b6b33;order:1}.nsfw-modal-actions .confirm-btn:hover:not(:disabled){transform:translateY(-2px);background-color:#ff8b8b;box-shadow:0 6px 20px #ff6b6b4d}.nsfw-modal-actions .modal-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (min-width: 1024px){.nsfw-modal-overlay{background-color:#000000bf;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.nsfw-modal-content{background-color:rgba(var(--background-color-rgb, 26, 26, 29),.9);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}}@media (max-width: 600px){.nsfw-modal-content{padding:2rem 1.5rem}.nsfw-modal-content h3{font-size:1.6rem}.nsfw-modal-content p{font-size:1rem}.nsfw-modal-actions{flex-direction:column;width:100%}.nsfw-modal-actions .modal-btn{width:100%;font-size:.9rem}}.gemini-run-settings-panel{position:fixed;top:0;right:0;bottom:0;width:85%;max-width:340px;background-color:#202123;border-left:1px solid var(--border-color);display:flex;flex-direction:column;z-index:1001;transform:translate(100%);transition:transform .3s cubic-bezier(.25,1,.5,1)}.gemini-run-settings-panel.is-open{transform:translate(0);box-shadow:-5px 0 25px #0000004d}.settings-panel-header .close-btn{display:block}@media (min-width: 1024px){.gemini-run-settings-panel{position:static;transform:none;width:320px;flex-shrink:0;transition:width .3s ease,opacity .3s ease;box-shadow:none;overflow:hidden}.gemini-run-settings-panel:not(.is-open){width:0;padding:0;border-left:none;opacity:0}.gemini-run-settings-panel.is-open{transform:none;width:320px;opacity:1;box-shadow:none}.settings-panel-header .close-btn{display:none}}.settings-panel-header{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--border-color);flex-shrink:0}.settings-panel-header h2{margin:0;font-size:1rem;font-weight:500}.settings-panel-header .close-btn{background:none;border:none;color:var(--text-color-secondary);cursor:pointer;padding:.25rem}.settings-panel-header .close-btn:hover{color:var(--text-color)}.settings-panel-content{padding:1.5rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem;flex-grow:1;scrollbar-width:none;-ms-overflow-style:none}.settings-panel-content::-webkit-scrollbar{display:none}.settings-section{display:flex;flex-direction:column;gap:1rem}.settings-section-header{display:flex;justify-content:space-between;align-items:center}.settings-section-header h3{margin:0;font-size:.9rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase}.token-count{font-size:.9rem;color:var(--text-color)}.setting-item{display:flex;flex-direction:column;gap:.75rem}.setting-item-row{display:flex;justify-content:space-between;align-items:center}.setting-item label{font-size:.95rem;color:var(--text-color);font-weight:500}.setting-item-row .numeric-input{width:70px;padding:.5rem;border-radius:6px;border:1px solid var(--border-color);background-color:#2c2c34;color:var(--text-color);font-size:.9rem;text-align:right}.slider-input{-webkit-appearance:none;width:100%;height:4px;background:#444;border-radius:2px;outline:none;padding:0;margin:0}.slider-input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:16px;height:16px;background:var(--primary-color);cursor:pointer;border-radius:50%;border:2px solid #202123}.toggle-switch-settings{position:relative;display:inline-block;width:44px;height:24px}.toggle-switch-settings input{display:none}.slider-settings{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#444;transition:.4s;border-radius:24px}.slider-settings:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}.toggle-switch-settings input:checked+.slider-settings{background-color:var(--primary-color)}.toggle-switch-settings input:checked+.slider-settings:before{transform:translate(20px)}.toggle-switch-settings input:disabled+.slider-settings{opacity:.5;cursor:not-allowed}.setting-item.disabled{opacity:.5;pointer-events:none}.setting-description{font-size:.85rem;color:var(--text-color-secondary);line-height:1.5;margin:-.5rem 0 0;padding:0 .25rem}#core-objective-input-panel{width:100%;resize:none;padding:.75rem 1rem;border-radius:8px;border:1px solid var(--border-color);background-color:#8a4fff0d;border-left:3px solid #8A4FFF;color:var(--text-color);font-size:.95rem;line-height:1.6;max-height:150px;transition:border-color .2s,box-shadow .2s;scrollbar-width:none;-ms-overflow-style:none}#core-objective-input-panel::-webkit-scrollbar{display:none}.error-notification-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000bf;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);z-index:5000;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease-out}.error-notification-overlay.visible{opacity:1;animation:fadeInOverlay .3s ease-out forwards}.error-notification-modal{background-color:var(--background-color);padding:0;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;overflow:hidden}.error-notification-modal.glow-border:before{background:radial-gradient(circle at 50% 50%,var(--error-color),var(--secondary-color),var(--error-color))}.error-notification-header{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 2rem;border-bottom:1px solid rgba(255,107,107,.2)}.error-notification-header h3{margin:0;font-family:var(--font-heading);font-size:1.5rem;color:var(--error-color);text-shadow:0 0 10px rgba(var(--error-color-rgb),.5)}.error-notification-close{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;cursor:pointer;padding:0 .5rem;transition:color .2s ease,transform .2s ease}.error-notification-close:hover{color:var(--error-color);transform:rotate(90deg)}.error-notification-body{padding:2rem;display:flex;align-items:flex-start;gap:1.5rem}.error-notification-body svg{flex-shrink:0;color:var(--error-color);width:32px;height:32px;margin-top:5px}.error-notification-body p{margin:0;line-height:1.7;font-size:1.05rem;color:var(--text-color);word-break:break-word}.error-notification-body p strong{color:var(--text-color);font-weight:600}@media (max-width: 600px){.error-notification-header{padding:1rem 1.5rem}.error-notification-header h3{font-size:1.25rem}.error-notification-body{padding:1.5rem;gap:1rem}.error-notification-body svg{width:28px;height:28px;margin-top:0}.error-notification-body p{font-size:1rem}}/**
* @license
* SPDX-License-Identifier: Apache-2.0
*/.gemini-chat-page-container{display:flex;height:100dvh;width:100%;background-color:var(--background-color);animation:fadeInPage .5s ease-in-out;position:relative}@keyframes fadeInPage{0%{opacity:0}to{opacity:1}}.gemini-chat-main-content{flex-grow:1;display:flex;flex-direction:column;min-width:0;min-height:0}.gemini-chat-page-header{display:flex;align-items:center;padding:.75rem 1.5rem;background:rgba(var(--background-color-rgb, 26, 26, 29),.8);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-bottom:1px solid rgba(138,79,255,.4);flex-shrink:0;z-index:10;position:relative;justify-content:space-between}.gcp-title{margin:0;font-size:1.5rem;font-family:var(--font-heading);background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.gcp-back-button,.gcp-reset-button{background:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary);padding:.6rem 1.2rem;border-radius:50px;cursor:pointer;transition:all .2s ease;font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.gcp-back-button:hover,.gcp-reset-button:hover{background-color:var(--border-color);color:var(--text-color)}.gcp-header-actions{display:flex;align-items:center;gap:1rem}.gcp-settings-toggle-btn{background:none;border:none;color:var(--text-color-secondary);cursor:pointer;padding:.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s,color .2s}.gcp-settings-toggle-btn:hover{background-color:var(--border-color);color:var(--text-color)}.gemini-chat-messages-container{flex-grow:1;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column;gap:1rem;scrollbar-width:none;-ms-overflow-style:none}.gemini-chat-messages-container::-webkit-scrollbar{display:none}.chat-welcome-message{margin:auto;text-align:center;color:var(--text-color-secondary)}.chat-welcome-message h2{font-family:var(--font-heading);font-size:2.5rem;margin-bottom:.5rem;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.message-wrapper-gcp{display:flex;flex-direction:column;max-width:80%;gap:.75rem}.message-wrapper-gcp.user{align-self:flex-end}.message-wrapper-gcp.model{align-self:flex-start}.message-bubble-gcp{padding:.75rem 1.25rem;border-radius:18px;line-height:1.6;word-wrap:break-word;animation:popIn .3s cubic-bezier(.25,1,.5,1);position:relative}.message-content-wrapper{padding-right:30px;display:flex;flex-direction:column;gap:.75rem}.message-image{max-width:100%;max-height:300px;border-radius:10px;object-fit:contain;margin-top:4px}.file-attachment-info-bubble{display:inline-flex;align-items:center;gap:.5rem;padding:.25rem .75rem;border-radius:12px;background-color:#0003;border:1px solid var(--border-color);font-size:.85rem;margin-bottom:4px}.copy-button-gcp{position:absolute;bottom:8px;right:8px;background-color:#0000004d;color:var(--text-color-secondary);border:1px solid var(--border-color);border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.4;transition:opacity .2s,background-color .2s,color .2s}.message-bubble-gcp:hover .copy-button-gcp{opacity:1}.copy-button-gcp:hover{background-color:var(--primary-color);color:#fff}@keyframes popIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.message-bubble-gcp.user{background:linear-gradient(45deg,#4facfe,#2e8de1);color:#fff;border-bottom-right-radius:4px}.message-bubble-gcp.model{background-color:var(--panel-background-color);border:1px solid var(--border-color);color:var(--text-color);border-bottom-left-radius:4px}.grounding-sources{padding:.75rem 1.25rem;background-color:#0003;border:1px solid var(--border-color);border-radius:12px;font-size:.9rem;align-self:flex-start;width:100%}.sources-title{font-weight:600;color:var(--text-color-secondary);margin:0 0 .5rem}.sources-list{list-style-type:decimal;padding-left:1.2rem;margin:0;display:flex;flex-direction:column;gap:.5rem}.sources-list li a{color:var(--primary-color);text-decoration:none;word-break:break-all}.sources-list li a:hover{text-decoration:underline}.gemini-chat-form-wrapper{padding:1rem 1.5rem;border-top:1px solid var(--border-color);flex-shrink:0;background-color:var(--background-color);display:flex;flex-direction:column;gap:.75rem;align-items:center}.gcp-stop-button{padding:.6rem 1.5rem;border:1px solid var(--error-color);background-color:#ff6b6b1a;color:var(--error-color);font-weight:600;border-radius:8px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.5rem}.gcp-stop-button:hover{background-color:#ff6b6b33;color:#fff}.gemini-chat-form-container{display:flex;flex-direction:column;gap:.75rem;align-items:stretch;width:100%}.chat-input-row{display:flex;gap:.75rem;align-items:flex-end;width:100%;flex-wrap:nowrap;min-height:48px}.gemini-chat-form-container textarea{flex-grow:1;resize:none;line-height:1.5;max-height:200px;padding:.75rem 1rem;font-size:1rem;overflow-y:auto;transition:height .05s linear}.gemini-chat-form-container button[type=submit]{height:48px;width:48px;flex-shrink:0;padding:0;border-radius:50%;background:var(--primary-color);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .2s,transform .2s}.gemini-chat-form-container button[type=submit]:hover:not(:disabled){background-color:var(--primary-hover-color);transform:scale(1.05)}.gemini-chat-form-container button[type=submit]:disabled{background-color:var(--border-color);cursor:not-allowed}.attach-file-button{height:48px;width:48px;flex-shrink:0;padding:0;border-radius:50%;background:transparent;color:var(--text-color-secondary);border:1px solid var(--border-color);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .2s,color .2s,transform .2s}.attach-file-button:hover:not(:disabled){background-color:var(--border-color);color:var(--text-color);transform:scale(1.05)}.attach-file-button:disabled{opacity:.6;cursor:not-allowed}.attached-file-display{display:flex;align-items:center;gap:.75rem;padding:.5rem 1rem;background-color:var(--panel-background-color);border:1px solid var(--border-color);border-radius:8px;font-size:.9rem;color:var(--text-color-secondary);animation:popIn .3s ease}.attached-file-display.image-preview{padding:.5rem;gap:.5rem}.attachment-thumbnail{width:40px;height:40px;object-fit:cover;border-radius:6px}.attached-file-display svg{flex-shrink:0;color:var(--primary-color)}.attached-file-display span{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.remove-file-btn{background:none;border:none;color:var(--text-color-secondary);font-size:1.5rem;cursor:pointer;padding:0 .5rem;line-height:1;transition:color .2s}.remove-file-btn:hover{color:var(--error-color)}.typing-indicator{display:flex;gap:4px;align-items:center;padding:8px 0}.typing-indicator span{width:8px;height:8px;background-color:var(--text-color-secondary);border-radius:50%;animation:typing-bounce 1.2s infinite ease-in-out}.typing-indicator span:nth-child(2){animation-delay:-1s}.typing-indicator span:nth-child(3){animation-delay:-.8s}@keyframes typing-bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.settings-overlay{display:none}@media (max-width: 1023px){.gemini-chat-page-container{flex-direction:column}.settings-overlay{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:#0009;z-index:1000;animation:fadeInOverlay .3s ease}.gemini-chat-page-header{padding:.75rem 1rem}.gcp-back-button{padding:0;width:40px;height:40px;justify-content:center}.gcp-back-button .gcp-back-button-text{display:none}.gcp-title{position:absolute;left:50%;transform:translate(-50%);font-size:1.25rem}.gcp-reset-button{padding:.6rem 1rem;font-size:.8rem}}@media (max-width: 480px){.gcp-reset-button{display:none}.gcp-title{position:static;transform:none;flex-grow:1;text-align:center}.gemini-chat-page-header{gap:.75rem}}.message-text-content{line-height:1.6;word-wrap:break-word}.message-text-content p{margin:0 0 .75rem}.message-text-content p:last-child{margin-bottom:0}.message-text-content h1,.message-text-content h2,.message-text-content h3{margin:1.5rem 0 .75rem;line-height:1.3;font-weight:600;border-bottom:1px solid var(--border-color);padding-bottom:.5rem}.message-text-content h1:first-child,.message-text-content h2:first-child,.message-text-content h3:first-child{margin-top:0}.message-text-content h1{font-size:1.5em}.message-text-content h2{font-size:1.25em}.message-text-content h3{font-size:1.1em}.message-text-content ul,.message-text-content ol{padding-left:1.5rem;margin:.75rem 0}.message-text-content li{margin-bottom:.25rem}.message-text-content a{color:var(--primary-color);text-decoration:none}.message-text-content a:hover{text-decoration:underline}.message-text-content code{background-color:#0000004d;padding:.2em .4em;border-radius:4px;font-family:var(--font-family-mono);font-size:.9em}.message-text-content pre{background-color:#0000004d;padding:1rem;border-radius:8px;overflow-x:auto;font-family:var(--font-family-mono);font-size:.9em}.message-text-content pre code{padding:0;background:none}.message-text-content blockquote{margin:1rem 0;padding-left:1rem;border-left:3px solid var(--border-color);color:var(--text-color-secondary)}.confirmation-modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000000d9;z-index:2100;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.confirmation-modal-content{background-color:var(--background-color);padding:2.5rem;border-radius:12px;width:90%;max-width:480px;display:flex;flex-direction:column;gap:.75rem;box-shadow:0 10px 40px #00000080;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1);text-align:center}.confirmation-modal-content.glow-border:before{background:radial-gradient(circle at 50% 50%,var(--error-color),var(--secondary-color),var(--error-color))}.confirmation-modal-content h3{margin:0 0 .5rem;font-family:var(--font-family-playfair-display);font-size:2rem;font-weight:700;color:var(--error-color);text-shadow:0 0 15px rgba(var(--error-color-rgb),.5)}.confirmation-modal-content p{margin:0 0 1.5rem;color:var(--text-color);line-height:1.6;font-size:1.1rem}.confirmation-modal-actions{display:flex;justify-content:center;gap:1rem;margin-top:1rem}.confirmation-modal-actions .modal-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;min-width:150px}.confirmation-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color-secondary)}.confirmation-modal-actions .cancel-btn:hover:not(:disabled){background-color:#ffffff0d;color:#fff}.confirmation-modal-actions .confirm-btn.delete-style{background-color:var(--error-color);color:#fff;box-shadow:0 4px 15px rgba(var(--error-color-rgb),.2)}.confirmation-modal-actions .confirm-btn.delete-style:hover:not(:disabled){transform:translateY(-2px);background-color:#ff8b8b;box-shadow:0 6px 20px rgba(var(--error-color-rgb),.3)}@media (max-width: 600px){.confirmation-modal-content{padding:2rem 1.5rem}.confirmation-modal-content h3{font-size:1.6rem}.confirmation-modal-actions{flex-direction:column-reverse;width:100%}.confirmation-modal-actions .modal-btn{width:100%}}.story-generator-container{animation:fadeInStoryGenerator .5s ease-in-out;display:flex;flex-direction:column;height:100dvh}.initial-load-container{display:flex;align-items:center;justify-content:center;min-height:100vh}@keyframes fadeInStoryGenerator{0%{opacity:0}to{opacity:1}}@keyframes glow-title{0%,to{text-shadow:0 0 10px rgba(var(--primary-color-rgb),.6),0 0 20px rgba(var(--secondary-color-rgb),.4)}50%{text-shadow:0 0 20px rgba(var(--primary-color-rgb),.8),0 0 35px rgba(var(--secondary-color-rgb),.6)}}.save-management-container{display:flex;flex-direction:column;align-items:center;padding:2rem;min-height:100dvh;position:relative;background-color:#1a1a1d}.save-management-panel{width:100%;max-width:900px;background:rgba(var(--background-color-rgb, 26, 26, 29),.95);padding:2.5rem;border-radius:12px;display:flex;flex-direction:column;gap:1.5rem;box-shadow:0 10px 40px #00000080,0 0 25px rgba(var(--primary-color-rgb),.1);z-index:1}.save-management-header{display:flex;justify-content:center;align-items:center;position:relative;border-bottom:1px solid rgba(var(--secondary-color-rgb),.3);padding-bottom:1.5rem;margin:-1.5rem 0 0}.back-button-panel{position:absolute;left:0;top:50%;transform:translateY(-50%);background:transparent;border:1px solid transparent;color:var(--text-color-secondary);cursor:pointer;padding:.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:color .2s,background-color .2s,transform .2s}.back-button-panel:hover{background-color:rgba(var(--secondary-color-rgb),.1);color:var(--primary-color)}.save-management-title{font-size:2.75rem;font-weight:700;margin:0;text-align:center;font-family:var(--font-family-playfair-display);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color),#00f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:glow-title 4s ease-in-out infinite}.save-management-subtitle{text-align:center;color:var(--text-color-secondary);font-size:1.1rem;line-height:1.7;margin:-.5rem 0 1rem;text-shadow:0 1px 3px rgba(0,0,0,.5)}.save-management-command-center{display:flex;gap:1rem;justify-content:flex-end}.command-center-button{padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:50px;cursor:pointer;transition:all .3s ease;background:#2d374880;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;gap:.75rem}.command-center-button svg{display:none}.new-project-button{border:2px solid rgba(var(--secondary-color-rgb),.4);box-shadow:0 0 15px rgba(var(--secondary-color-rgb),.15),inset 0 0 10px rgba(var(--secondary-color-rgb),.1);color:var(--text-color)}.new-project-button:hover:not(:disabled){transform:translateY(-2px);border-color:var(--primary-hover-color);background:#2d3748b3;box-shadow:0 0 25px rgba(var(--secondary-color-rgb),.3),inset 0 0 15px rgba(var(--secondary-color-rgb),.2)}.import-json-button{border:2px solid rgba(139,233,253,.4);box-shadow:0 0 15px #8be9fd26,inset 0 0 10px #8be9fd1a;color:#d1effa}.import-json-button:hover:not(:disabled){transform:translateY(-2px);border-color:#8be9fd;background:#2d3748b3;box-shadow:0 0 25px #8be9fd80,inset 0 0 15px #8be9fd33}.delete-all-button{border:2px solid rgba(255,107,107,.4);box-shadow:0 0 15px #ff6b6b26,inset 0 0 10px #ff6b6b1a;color:#fcc}.delete-all-button:hover:not(:disabled){transform:translateY(-2px);border-color:var(--error-color);background:#2d3748b3;box-shadow:0 0 25px #ff6b6b80,inset 0 0 15px #ff6b6b33}.delete-all-button:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}.import-message{padding:1rem;border-radius:8px;margin-top:1rem;text-align:center;font-weight:500;animation:fadeInMessage .5s ease}.import-message.success{background-color:#50fa7b1a;border:1px solid var(--success-color);color:var(--success-color)}.import-message.error{background-color:#ff6b6b1a;border:1px solid var(--error-color);color:var(--error-color)}@keyframes fadeInMessage{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.no-projects-message{text-align:center;color:var(--text-color-secondary);padding:3rem 2rem;border:2px dashed rgba(var(--secondary-color-rgb),.3);border-radius:8px;background:#0003}.no-projects-message p{font-size:1.2rem;font-weight:500;color:var(--text-color);margin:0 0 .5rem}.no-projects-message span{font-size:1rem}.project-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:1rem;max-height:60vh;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.project-item{display:flex;justify-content:space-between;align-items:center;gap:1rem;background:#2d374880;padding:1.25rem;border-radius:8px;transition:transform .2s,box-shadow .2s}.project-item:hover{transform:translateY(-3px);box-shadow:0 4px 20px rgba(var(--secondary-color-rgb),.15)}.project-info{flex-grow:1;display:flex;flex-direction:column;gap:.25rem;min-width:0}.project-name{font-size:1.1rem;font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.project-date{font-size:.85rem;color:var(--text-color-secondary)}.rename-input{width:100%;padding:.5rem;border-radius:4px;border:1px solid var(--primary-color);background-color:#25252a;color:var(--text-color);font-size:1.1rem;font-weight:600}.rename-input:focus{outline:none;box-shadow:0 0 0 3px rgba(var(--primary-color-rgb),.25)}.project-actions{display:flex;gap:.75rem;flex-shrink:0}.project-actions .action-btn svg{display:none}.action-btn{padding:.5rem 1rem;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;border:1px solid rgba(var(--secondary-color-rgb),.3);background-color:transparent;color:var(--text-color-secondary);transition:all .2s}.action-btn:hover:not(:disabled){background-color:#ffffff0d;transform:translateY(-1px)}.load-btn{border-color:var(--success-color);color:var(--success-color)}.load-btn:hover:not(:disabled){background-color:#50fa7b1a;box-shadow:0 0 8px #50fa7b4d}.export-txt-btn:hover:not(:disabled){border-color:#f1fa8c;color:#f1fa8c}.export-json-btn:hover:not(:disabled){border-color:#8be9fd;color:#8be9fd}.rename-btn:hover:not(:disabled){border-color:#69b3ff;color:#69b3ff}.delete-btn:hover:not(:disabled){border-color:#ff6b6b;color:#ff6b6b}.project-list::-webkit-scrollbar{display:none}@media (min-width: 1024px){.save-management-panel{background:rgba(var(--background-color-rgb, 26, 26, 29),.85);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}}@media (max-width: 768px){.save-management-panel{padding:2rem 0}.save-management-header,.save-management-subtitle,.save-management-command-center{padding-left:1.5rem;padding-right:1.5rem}.save-management-title{font-size:2.25rem}.save-management-command-center{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem;justify-content:stretch}.command-center-button{padding:1rem;border-radius:8px;font-size:.9rem;flex-direction:column;gap:.5rem;height:auto;backdrop-filter:none;-webkit-backdrop-filter:none}.command-center-button svg{display:block;width:24px;height:24px}.command-center-button.new-project-button{grid-column:1 / -1;font-size:1rem;flex-direction:row;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));color:#fff;border:none}.project-item{background:#25252a;padding:1rem;flex-direction:column;align-items:stretch;gap:1rem;margin:0 1.5rem}.project-item:first-child{margin-top:1rem}.project-item:last-child{margin-bottom:1rem}.project-actions{display:flex;gap:.5rem;align-items:center;border-top:1px solid var(--border-color);padding-top:1rem}.project-actions .action-btn span{display:none}.project-actions .action-btn svg{display:block;width:20px;height:20px}.project-actions .action-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;padding:0;border-radius:50%}.project-actions .load-btn{flex-grow:1;width:auto;height:auto;border-radius:8px;padding:.75rem;display:flex;gap:.5rem;font-size:1rem}.project-actions .load-btn span{display:inline}.project-actions .load-btn svg{display:block}}@media (max-width: 480px){.save-management-container{padding:1rem}.save-management-panel{padding-top:1.5rem;padding-bottom:1.5rem}.save-management-header,.save-management-subtitle,.save-management-command-center{padding-left:1rem;padding-right:1rem}.project-item{margin:0 1rem}}@keyframes fadeInApiKeyOverlay{0%{opacity:0}to{opacity:1}}@keyframes slideInApiKeyModal{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.api-key-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInApiKeyOverlay .3s ease-out}.api-key-modal-content{background-color:var(--background-color);padding:2.5rem;border-radius:12px;width:90%;max-width:480px;display:flex;flex-direction:column;gap:.75rem;box-shadow:0 10px 40px #00000080,0 0 25px rgba(var(--primary-color-rgb),.1);position:relative;animation:slideInApiKeyModal .3s cubic-bezier(.25,1,.5,1);text-align:center}.api-key-modal-content h3{margin:0 0 .5rem;font-family:var(--font-family-playfair-display);font-size:2rem;font-weight:700;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(var(--primary-color-rgb),.5)}.api-key-modal-content p{margin:0 0 .5rem;color:var(--text-color);line-height:1.6;font-size:1.1rem}.api-key-modal-content .modal-sub-text{font-size:.95rem;color:#d1c8b3;margin-bottom:1.5rem}.api-key-modal-actions{display:flex;justify-content:center;gap:1rem;margin-top:1rem}.api-key-modal-actions .modal-btn{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;min-width:150px}.api-key-modal-actions .cancel-btn{background-color:transparent;border:1px solid var(--border-color);color:#d1c8b3}.api-key-modal-actions .cancel-btn:hover:not(:disabled){background-color:#ffffff0d;color:#fff}.api-key-modal-actions .confirm-btn{background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));color:#fff;box-shadow:0 4px 15px rgba(var(--primary-color-rgb),.2)}.api-key-modal-actions .confirm-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(var(--primary-color-rgb),.3)}.api-key-modal-actions .modal-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}@media (min-width: 1024px){.api-key-modal-overlay{background-color:#000000bf;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.api-key-modal-content{background-color:rgba(var(--background-color-rgb),.9);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}}@media (max-width: 600px){.api-key-modal-content{padding:2rem 1.5rem}.api-key-modal-content h3{font-size:1.6rem}.api-key-modal-content p{font-size:1rem}.api-key-modal-actions .modal-btn{padding:.7rem 1rem;min-width:120px;font-size:.9rem}.api-key-modal-actions{flex-direction:column;width:100%}}.api-key-manager{display:flex;flex-direction:column;gap:1.25rem}.api-key-manager-intro{margin:-1.25rem 0 0;color:var(--text-color-secondary);font-size:.95rem}.api-key-guide-list{list-style:none;padding:0;margin:0;counter-reset:guide-counter;display:flex;flex-direction:column;gap:1rem}.api-key-guide-list li{display:flex;align-items:flex-start;gap:1rem;line-height:1.6;color:var(--text-color-secondary)}.api-key-guide-list li:before{counter-increment:guide-counter;content:counter(guide-counter);background:#8a4fff;color:#fff;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:.9rem;margin-top:2px}.api-key-guide-list strong{color:var(--text-color);font-weight:600}.api-key-guide-list a,.api-key-manager-intro a{background:linear-gradient(45deg,#a076ff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;font-weight:500;text-decoration:none}.api-key-guide-list a:hover,.api-key-manager-intro a:hover{text-decoration:underline}.api-key-button-mockup{background-color:#3a3a42;padding:.2em .6em;border-radius:4px;font-family:var(--font-family-mono);color:var(--text-color);border:1px solid var(--border-color);white-space:nowrap}.api-key-note{display:flex;gap:1rem;align-items:flex-start;padding:1rem;border-radius:8px;background-color:#8a4fff14;border:1px solid rgba(138,79,255,.5);color:var(--text-color-secondary);font-size:.9rem;line-height:1.6}.api-key-note svg{flex-shrink:0;width:20px;height:20px;margin-top:3px;color:#8a4fff}.api-key-note strong{background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.api-key-input-section{display:flex;flex-direction:column;gap:.75rem}.api-key-actions{display:flex;justify-content:flex-end;gap:.75rem}.save-keys-button{padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;background-color:#8a4fff;color:#fff;transition:background-color .2s,transform .2s,opacity .2s}.save-keys-button:hover:not(:disabled){background-color:#a076ff;transform:translateY(-1px)}.save-keys-button:disabled{opacity:.7;cursor:not-allowed;background-color:#5d3f9e}#api-keys-input+label{font-weight:600;color:var(--text-color)}#api-keys-input{min-height:100px;font-family:var(--font-family-mono)!important;font-size:.95rem!important;line-height:1.6!important;background-color:#25252a;border:1px solid rgba(138,79,255,.4)}#api-keys-input:focus{outline:none;border-color:#8a4fff;box-shadow:0 0 0 3px #8a4fff33}.api-key-description{font-size:.85rem;color:var(--text-color-secondary);margin:0;line-height:1.5}.api-key-status-section{margin-top:1rem;padding:1.5rem;border-top:1px solid rgba(138,79,255,.2);background-color:#212125;border-radius:8px;border:1px solid rgba(138,79,255,.2)}.status-title{font-family:var(--font-family-playfair-display);font-size:1.5rem;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;margin:0 0 1rem}.status-info{margin:.5rem 0;color:var(--text-color-secondary);font-size:.95rem}.status-info strong{color:var(--text-color);font-weight:600}.key-status-dots{display:flex;gap:.75rem;padding:1rem 0;margin-bottom:1rem}.key-dot{width:12px;height:12px;border-radius:50%;background-color:#505058;transition:background-color .3s,transform .3s,box-shadow .3s}.key-dot.active{background-color:#8a4fff;transform:scale(1.2);box-shadow:0 0 8px 1px #8a4fff}.api-key-auto-manage-note{padding:1rem;border-radius:8px;border:1px solid #8A4FFF;border-left-width:4px;font-size:.9rem;line-height:1.6;background:linear-gradient(90deg,#8a4fff1a,#8a4fff0d)}.api-key-auto-manage-note p{margin:0;color:var(--text-color-secondary)}.api-key-auto-manage-note strong{background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;font-weight:600}.settings-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:2000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out}.settings-modal-content{background-color:var(--background-color);border-radius:12px;width:90%;max-width:600px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px rgba(var(--primary-color-rgb),.1);position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards}.settings-modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid rgba(var(--secondary-color-rgb),.2);flex-shrink:0}.settings-modal-header h3{margin:0;font-family:var(--font-family-playfair-display);font-size:2rem;font-weight:700;background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(var(--primary-color-rgb),.5)}.close-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-modal-button:hover{background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;transform:rotate(90deg)}.settings-modal-body{padding:2rem;overflow-y:auto;display:flex;flex-direction:column;gap:2rem;scrollbar-width:none;-ms-overflow-style:none}.settings-modal-footer{padding:1rem 2rem;border-top:1px solid rgba(var(--secondary-color-rgb),.2);text-align:right;color:var(--text-color-secondary);font-size:.85rem;font-family:var(--font-family-mono);flex-shrink:0}.modal-divider{border-bottom:1px solid rgba(var(--secondary-color-rgb),.2);margin:.5rem 0}.settings-modal-body h4{margin:0;font-size:1.3rem;font-weight:600;font-family:var(--font-family-playfair-display);padding-bottom:.75rem;border-bottom:1px solid rgba(var(--secondary-color-rgb),.2);background:linear-gradient(45deg,var(--secondary-color),var(--primary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.setting-description{font-size:.9rem;color:var(--text-color-secondary);margin:-1.5rem 0 0;line-height:1.6}.setting-description.mini{font-size:.8rem;margin-top:.5rem}.model-settings-grid{display:flex;flex-direction:column;gap:1.5rem}.model-select{width:100%;padding:.75rem;border-radius:6px;border:1px solid var(--border-color);background-color:#25252a;color:var(--text-color);font-size:.95rem}.model-select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.25)}.settings-modal-body::-webkit-scrollbar{display:none}@media (min-width: 1024px){.settings-modal-overlay{background-color:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.settings-modal-content{background-color:rgba(var(--background-color-rgb),.9);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}}.setting-toggle-item-modal{background-color:#2c2c34;padding:1rem;border-radius:8px;display:flex;flex-direction:column;gap:.75rem}.setting-toggle-label-modal{display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-weight:500;color:var(--text-color);font-size:.95rem}.toggle-switch{position:relative;display:inline-block;width:50px;height:28px;flex-shrink:0}.toggle-switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#444;transition:.4s;border-radius:28px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input:checked+.slider{background-color:var(--success-color)}input:focus+.slider{box-shadow:0 0 1px var(--success-color)}input:checked+.slider:before{transform:translate(22px)}@keyframes glow{0%,to{text-shadow:0 0 10px rgba(79,172,254,.6),0 0 20px rgba(138,79,255,.4)}50%{text-shadow:0 0 20px rgba(79,172,254,.8),0 0 35px rgba(138,79,255,.6)}}@keyframes fadeInWelcomeOverlay{0%{opacity:0}to{opacity:1}}@keyframes slideInWelcomeModal{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes spin{to{transform:rotate(360deg)}}.welcome-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:3000;display:flex;align-items:center;justify-content:center;animation:fadeInWelcomeOverlay .3s ease-out}.welcome-modal-content{background-color:var(--background-color);padding:2.5rem;border-radius:12px;width:90%;max-width:500px;display:flex;flex-direction:column;align-items:center;gap:1rem;box-shadow:0 10px 40px #00000080,0 0 25px #4facfe1a;position:relative;animation:slideInWelcomeModal .3s cubic-bezier(.25,1,.5,1) forwards;text-align:center}.close-welcome-modal-button{position:absolute;top:1rem;right:1rem;background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-welcome-modal-button:hover{background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;transform:rotate(90deg)}.welcome-modal-title{margin:0 0 .5rem;font-family:var(--font-family-playfair-display);font-size:2.2rem;font-weight:700;background:linear-gradient(45deg,#8a4fff,#4facfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:glow 4s ease-in-out infinite}.welcome-modal-subtitle,.welcome-modal-invite-text{margin:0;color:var(--text-color-secondary);line-height:1.6;font-size:1.1rem;max-width:40ch}.highlight-red{color:var(--error-color);font-weight:600}.author-image-container{position:relative;width:100%;margin:.5rem 0;border-radius:8px;overflow:hidden;box-shadow:0 4px 15px #0000004d;background-color:var(--panel-background-color);min-height:200px;display:flex;align-items:center;justify-content:center}.image-spinner{width:40px;height:40px;border:4px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:spin 1s linear infinite}.welcome-modal-author-image{display:block;max-width:100%;max-height:350px;width:auto;height:auto;border-radius:8px;opacity:0;transition:opacity .4s ease-in-out}.welcome-modal-author-image.loaded{opacity:1}.welcome-modal-discord-button{display:inline-flex;align-items:center;justify-content:center;gap:.75rem;padding:.75rem 1.75rem;margin-top:1rem;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;text-decoration:none;cursor:pointer;transition:all .2s ease;background-color:#5865f2;color:#fff;box-shadow:0 4px 15px #5865f24d}.welcome-modal-discord-button:hover{transform:translateY(-2px);background-color:#6a75f5;box-shadow:0 6px 20px #5865f266}@media (min-width: 1024px){.welcome-modal-overlay{background-color:#000000bf;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.welcome-modal-content{background-color:rgba(var(--background-color-rgb, 26, 26, 29),.9);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}}@media (max-width: 600px){.welcome-modal-content{padding:1.5rem;gap:.75rem;width:95%}.welcome-modal-title{font-size:1.8rem}.welcome-modal-subtitle,.welcome-modal-invite-text{font-size:1rem}.welcome-modal-discord-button{padding:.6rem 1.25rem;font-size:1rem}.close-welcome-modal-button{top:.5rem;right:.5rem;font-size:2rem}}.update-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000d9;z-index:3000;display:flex;align-items:center;justify-content:center;animation:fadeInOverlay .3s ease-out;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.update-modal-content{background-color:var(--background-color);padding:0;border-radius:12px;width:90%;max-width:550px;display:flex;flex-direction:column;box-shadow:0 10px 40px #00000080,0 0 25px #50fa7b1a;position:relative;animation:slideInModal .3s cubic-bezier(.25,1,.5,1) forwards;max-height:90vh}.update-modal-header{padding:1.5rem 2rem;border-bottom:1px solid rgba(80,250,123,.2);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.update-modal-header h3{margin:0;font-family:var(--font-heading);font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#50fa7b,#69b3ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px rgba(80,250,123,.5)}.close-update-modal-button{background:transparent;border:none;color:var(--text-color-secondary);font-size:2.5rem;line-height:1;padding:0;cursor:pointer;transition:color .2s,transform .2s}.close-update-modal-button:hover{color:var(--text-color);transform:rotate(90deg)}.update-modal-body{padding:2rem;color:var(--text-color-secondary);line-height:1.7;flex-grow:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:1.5rem}.update-modal-body>p{font-size:1.1rem;color:var(--text-color);margin:0}.update-highlight{background-color:#e0c0681a;border:1px solid rgba(224,192,104,.3);border-radius:6px;padding:1rem 1.5rem;color:#e0c068;font-size:.95rem;width:100%}.update-highlight p{margin:0}.update-modal-footer{padding:1.5rem 2rem;border-top:1px solid rgba(80,250,123,.2);display:flex;justify-content:flex-end;flex-shrink:0}.update-ok-button{padding:.75rem 1.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;background-color:var(--success-color);color:#1a1a1d;box-shadow:0 4px 15px #50fa7b33;transition:transform .2s ease,box-shadow .2s ease,background-color .2s ease}.update-ok-button:hover{transform:translateY(-2px);background-color:#6beba4;box-shadow:0 6px 20px #50fa7b4d}@keyframes fadeInOverlay{0%{opacity:0}to{opacity:1}}@keyframes slideInModal{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 600px){.update-modal-header h3{font-size:1.4rem}.update-modal-header{padding:1rem 1.5rem}.update-modal-body{padding:1.5rem}.update-modal-footer{padding:1rem 1.5rem}}.app-root{min-height:100vh}
